# 移动端 100vh 出现滚动条

> 为啥出现：部分移动浏览器（如 Safari、Chrome 移动端）会将地址栏、工具栏的高度计算到 100vh 中，但这些栏目的显示 / 隐藏会动态改变实际可视区域高度，导致 100vh 实际高度大于可见区域，从而出现滚动条。

## js 计算(推荐)

```javascript
// 初始化时设置高度
function setFullHeight() {
  const vh = window.innerHeight * 0.01; // window.innerHeight 会动态返回当前可见区域高度（不包含浏览器工具栏）
  document.documentElement.style.setProperty("--vh", `${vh}px`);
}

// 初始化执行
setFullHeight();

// 监听窗口大小变化（如地址栏显示/隐藏时）
window.addEventListener("resize", setFullHeight);

// 监听旋转屏幕事件
window.addEventListener("orientationchange", setFullHeight);
```

定义全局 css

```css
/* 代替 height: 100vh */
.full-height {
  height: calc(var(--vh, 1vh) * 100);
}
```

使用

```html
<div class="full-height"></div>
```

## css 适配定义

配置 html 的 meta 标签

```html
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, viewport-fit=cover"
/>
```

```css
.full-height {
  /* 基础高度 */
  height: 100vh;
  /* 减去底部安全区域（适用于有虚拟Home键的设备） */
  height: calc(100vh - env(safe-area-inset-bottom));
  /* 兼容旧版iOS */
  height: calc(100vh - constant(safe-area-inset-bottom));
}
```

## 绝对定位（仅简单布局且需完全覆盖屏幕的元素）

```css
/** 需确保其父级链上的所有元素都有 height: 100% */
.full-height {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow-y: auto; /* 内容超出时内部滚动，避免全局滚动条 */
}
```

## 现代浏览器方案

> [【https://caniuse.com/?search=dvh】](https://caniuse.com/?search=dvh)

```css
.full-height {
  height: 100dvh; /* 根据最新标准动态计算 */
}
```
