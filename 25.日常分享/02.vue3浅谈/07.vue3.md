## resolveDynamicComponent

> `resolveDynamicComponent` åªèƒ½åœ¨ `render` æˆ– `setup` å‡½æ•°ä¸­ä½¿ç”¨ã€‚
>
> è¿”å›å·²è§£æçš„ `Component` æˆ–æ–°åˆ›å»ºçš„ `VNode`ï¼Œå…¶ä¸­ç»„ä»¶åç§°ä½œä¸ºèŠ‚ç‚¹æ ‡ç­¾ã€‚å¦‚æœæ‰¾ä¸åˆ° `Component`ï¼Œå°†å‘å‡ºè­¦å‘Šã€‚
>
> ```js
> import { resolveDynamicComponent } from 'vue'
> render () {
>   // æ¥å—ä¸€ä¸ªå‚æ•°ï¼šcomponent:String | Object (ç»„ä»¶çš„é€‰é¡¹å¯¹è±¡)
>   const MyComponent = resolveDynamicComponent('MyComponent')
> }
> ```

```ts
export const COMPONENTS = 'components'
export function resolveDynamicComponent(component: unknown): VNodeTypes {
  if (isString(component)) {
    return resolveAsset(COMPONENTS, component, false) || component
  } else {
    // æ— æ•ˆç±»å‹å°†ä¼šæ˜¯å¤±è´¥çš„å»createVNodeå¹¶ä¸”å¼•å‘è­¦å‘Š
    return (component || NULL_DYNAMIC_COMPONENT) as any
  }
}
```

## resolveDirective

> `resolveDirective` åªèƒ½åœ¨ `render` æˆ– `setup` å‡½æ•°ä¸­ä½¿ç”¨ã€‚
>
> å¦‚æœåœ¨å½“å‰åº”ç”¨å®ä¾‹ä¸­å¯ç”¨ï¼Œåˆ™å…è®¸é€šè¿‡å…¶åç§°è§£æä¸€ä¸ª `directive`ã€‚è¿”å›ä¸€ä¸ª `Directive`ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å› `undefined`ã€‚

```ts
export function resolveDirective(name: string): Directive | undefined {
  return resolveAsset(DIRECTIVES, name)
}
```
## withDirectives

> `withDirectives` åªèƒ½åœ¨ `render` æˆ– `setup` å‡½æ•°ä¸­ä½¿ç”¨ã€‚å…è®¸å°†æŒ‡ä»¤åº”ç”¨äº **VNode**ã€‚è¿”å›ä¸€ä¸ªåŒ…å«åº”ç”¨æŒ‡ä»¤çš„ VNodeã€‚

```ts
/**
 * Adds directives to a VNode.å‘VNodeæ·»åŠ æŒ‡ä»¤ã€‚
 */
export function withDirectives<T extends VNode>(
  vnode: T,
  directives: DirectiveArguments
): T {
  const internalInstance = currentRenderingInstance // è·å–å†…éƒ¨å½“å‰æ¸²æŸ“å®ä¾‹
  if (internalInstance === null) {
    // `withDirectives` åªèƒ½åœ¨ `render` æˆ– `setup` å‡½æ•°ä¸­ä½¿ç”¨
    __DEV__ && warn(`withDirectives can only be used inside render functions.`)
    return vnode
  }
  const instance = internalInstance.proxy
  const bindings: DirectiveBinding[] = vnode.dirs || (vnode.dirs = [])
  for (let i = 0; i < directives.length; i++) {
    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i]
    if (isFunction(dir)) {
      dir = {
        mounted: dir,
        updated: dir
      } as ObjectDirective
    }
    bindings.push({
      dir,
      instance,
      value,
      oldValue: void 0,
      arg,
      modifiers
    })
  }
  return vnode
}
```

emmmmmmmmè´´ä¸ªä»£ç å¯ä»¥çœ‹æ–­ç‚¹

main.js

```ts
import { createApp } from 'vue'
import App from './App.vue'
const app = createApp(App)
import test5 from "./components/test5";
app.component('MyComponent', test5)
app.directive('highlight', {
  beforeMount(el, binding, vnode) {
    el.style.background = binding.value
  }
})
app.mount('#app')

```

App.vue

```ts
<template>
  <test></test>
  <MyComponent></MyComponent>
</template>

<script>
import test from "./components/test";

export default {
  name: 'App',
  components: {
    test,
  }
}
</script>

```

test.vue

```ts
<template>
  <div>è€å…«ç§˜åˆ¶å°æ±‰å ¡ğŸ”</div>
</template>
<script>
  export default {
    name: "test",
  }
</script>

```

test5.vue

```ts
<script>
  import { resolveDirective,h } from 'vue'
  export default {
    render () {
      const highlightDirective = resolveDirective('highlight')
      console.log('highlightDirective', highlightDirective)
      return h (
        'h1',   // æ ‡ç­¾åç§°
        {}, // props
        'ä¸€æ—¥ä¸‰é¤æ²¡çƒ¦æ¼ï¼Œå¥¥åˆ©ç»™ï¼ŒğŸ‘´ç¨³äº†'
      )
    }
  }
</script>

```

