# æ³›å‹

> æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ä½¿è¿”å›å€¼çš„ç±»å‹ä¸ä¼ å…¥å‚æ•°çš„ç±»å‹æ˜¯ç›¸åŒçš„ã€‚ è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨äº† **ç±»å‹å˜é‡**ï¼Œå®ƒæ˜¯ä¸€ç§ç‰¹æ®Šçš„å˜é‡ï¼Œåªç”¨äºè¡¨ç¤ºç±»å‹è€Œä¸æ˜¯å€¼ã€‚
>
> ç®€å•ç†è§£
> æˆ‘ä»¬ä¸ä½¿ç”¨TSä¹‹å‰å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œ<font  color=#ff0000>**å‡½æ•°æ¥å—ä¸€å¥—å‚æ•°ï¼Œè¿™ä¸€å¥—å‚æ•°å‚ä¸å‡½æ•°çš„é€»è¾‘æ‰§è¡Œ**</font>
>
> ```js
> function test(params){
> // æ‰§è¡Œé€»è¾‘......
> }
> ```
>
> -ç°åœ¨åœ¨TSä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸º:
>
> <font  color=#0681d0>1</font>. <font  color=#ff0000>**å‡½æ•°æ¥æ”¶ä¿©å¥—å‚æ•°ï¼ŒT ä¸ paramsï¼ŒTä¸ºç±»å‹å˜é‡ï¼Œparamsæ˜¯å‚æ•°å˜é‡ï¼Œ**</font>
>
> <font  color=#0681d0>2</font>. <font  color=#ff0000>**T æ•è·æˆ‘ä»¬ä¼ å‚çš„ç±»å‹ï¼Œå½“æˆ‘ä»¬ä¼ å…¥stringç±»å‹ï¼ŒTè‡ªåŠ¨å¸®æˆ‘ä»¬æ•è·åˆ°paramsçš„ç±»å‹ä¸ºstring**</font>
>
> -è”æƒ³vueçš„è®¡ç®—å±æ€§ï¼Œæ˜¯ä¸æ˜¯æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å¦ä¸€ä¸ªç»è¿‡è®¡ç®—çš„å€¼ï¼ŒTä¹Ÿæ˜¯ï¼Œä»–æ¥æ”¶æˆ‘ä»¬çš„ä¼ å‚ï¼Œè¿”å›æˆ‘ä»¬çš„å‚æ•°ç±»å‹


```ts
// å£°æ˜ä¸€ä¸ªå‡½æ•°identityï¼Œæ¥æ”¶å‚æ•°argï¼Œç±»å‹ä¸ç¡®å®šï¼Œä½†å¯ä»¥ç¡®å®šidentityå‡½æ•°è¿”å›å€¼ä¸€å®šæ˜¯ä¼ å…¥å‚æ•°çš„ç±»å‹
// æˆ‘ä»¬ç»™identityæ·»åŠ äº†ç±»å‹å˜é‡Tã€‚ Tå¸®åŠ©æˆ‘ä»¬æ•è·ç”¨æˆ·ä¼ å…¥çš„ç±»å‹ï¼ˆæ¯”å¦‚ï¼šnumberï¼‰
function identity<T>(arg: T): T {
    return arg;
}
```

* æˆ‘ä»¬å®šä¹‰äº†æ³›å‹å‡½æ•°åï¼Œå¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•ä½¿ç”¨ã€‚
  *  ç¬¬ä¸€ç§æ˜¯ï¼Œä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼ŒåŒ…å«ç±»å‹å‚æ•°ï¼š
  * ç¬¬äºŒç§æ–¹æ³•æ›´æ™®éã€‚åˆ©ç”¨äº†*ç±»å‹æ¨è®º* -- å³ç¼–è¯‘å™¨ä¼šæ ¹æ®ä¼ å…¥çš„å‚æ•°è‡ªåŠ¨åœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šTçš„ç±»å‹ï¼š

```ts
// æ–¹æ³•ä¸€
// è¿™é‡Œæˆ‘ä»¬æ˜ç¡®çš„æŒ‡å®šäº†Tæ˜¯stringç±»å‹ï¼Œå¹¶åšä¸ºä¸€ä¸ªå‚æ•°ä¼ ç»™å‡½æ•°
let output = identity<string>("myString");  // outputçš„ç±»å‹ä¸ºstring
// æ–¹æ³•äºŒ
let output = identity("myString");  // outputçš„ç±»å‹ä¸ºstring,ç¼–è¯‘å™¨å¯ä»¥æŸ¥çœ‹myStringçš„å€¼ï¼Œç„¶åæŠŠTè®¾ç½®ä¸ºå®ƒçš„ç±»å‹
```

## ä½¿ç”¨æ³›å‹å˜é‡

> å¯¹æ¯”ä¸¤æ®µä»£ç 

* ç‰‡æ®µ1

```ts
function loggingIdentity<T>(arg: T): T {
    console.log(arg.length);  // Error: Tä¸ä¸€å®šæœ‰lengthå±æ€§
    return arg;
}
```
* ç‰‡æ®µ2
```ts
function loggingIdentity<T>(arg: T[]): T[] {
console.log(arg.length); 
return arg;
}
```
> ç‰‡æ®µ2ä¸­ï¼Œæ¥æ”¶ç±»å‹å‚æ•°Tå’Œå‚æ•°argï¼Œargæ˜¯ä¸ªå…ƒç´ ç±»å‹ä¸ºTçš„æ•°ç»„
>
> è¿”å›å…ƒç´ ç±»å‹æ˜¯`T`çš„æ•°ç»„

## è°ƒç”¨ç­¾åçš„å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰æ³›å‹å‡½æ•°

* ä¸¾ä¾‹ğŸŒ°

```ts
function identity<T>(arg: T): T {
    return arg;
}

let myIdentity: {<T>(arg: T): T} = identity;
```

> ???????????è’™äº†å•Šï¼

* emmmmmmmmå†™ç¬¬ä¸€ä¸ªæ³›å‹æ¥å£

```ts
// æ¥å£GenericIdentityFnï¼Œçº¦å®šå®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥æ”¶Tç±»å‹çš„çš„å‚æ•°argï¼Œæ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ºTç±»å‹
interface GenericIdentityFn {
    <T>(arg: T): T;
}
// å£°æ˜ä¸€ä¸ªemmmmmmmmmmmğŸ´ã®
function identity<T>(arg: T): T {
    return arg;
}
// å£°æ˜å˜é‡myIdentityï¼Œç±»å‹ä¸ºGenericIdentityFnï¼Œ
let myIdentity: GenericIdentityFn = identity;
```

* æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªç±»å‹å‚æ•°æ¥é”å®šä»£ç é‡Œä½¿ç”¨çš„ç±»å‹

```ts
interface GenericIdentityFn<T> {
    (arg: T): T;
}
function identity<T>(arg: T): T {
    return arg;
}
let myIdentity: GenericIdentityFn<number> = identity;// è¿™é‡Œï¼Œæˆ‘ä»¬çš„myIdentityå˜é‡ç±»å‹ç¨³ç¨³çš„number
```

## æ³›å‹ç±»

**ç±»çš„é™æ€å±æ€§ä¸èƒ½ä½¿ç”¨è¿™ä¸ªæ³›å‹ç±»å‹**

```ts
class GenericNumber<T> { // GenericNumberç±»æ¥å—Tç±»å‹å‚æ•°
    zeroValue: T;
    add: (x: T, y: T) => T;
}

let myGenericNumber = new GenericNumber<number>();
myGenericNumber.zeroValue = 0;
myGenericNumber.add = function(x, y) { return x + y; };
```

## æ³›å‹çº¦æŸ

> å‰æï¼šæˆ‘ä»¬æœ‰æ—¶å€™æƒ³æ“ä½œæŸç±»å‹çš„ä¸€ç»„å€¼ï¼Œå¹¶ä¸”æˆ‘ä»¬çŸ¥é“è¿™ç»„å€¼å…·æœ‰ä»€ä¹ˆæ ·çš„å±æ€§ã€‚ åœ¨ `loggingIdentity`ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æƒ³è®¿é—®`arg`çš„`length`å±æ€§ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å¹¶ä¸èƒ½è¯æ˜æ¯ç§ç±»å‹éƒ½æœ‰`length`å±æ€§ï¼Œ

```ts
function loggingIdentity<T>(arg: T): T {
    console.log(arg.length);  // Error: T doesn't have .length
    return arg;
}
```

> æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¥å£æ¥æè¿°çº¦æŸæ¡ä»¶,æ¥å¯¹æˆ‘ä»¬çš„ç±»å‹Tè¿›è¡Œçº¦æŸ

```ts
interface Lengthwise { // æ¥å£Lengthwiseçº¦æŸå®ç°.lengthç±»å‹ä¸ºnumber
    length: number;
}
function loggingIdentity<T extends Lengthwise>(arg: T): T {
    console.log(arg.length);  // Now we know it has a .length property, so no more error
    return arg;
}
```

> ç®€å•ç†è§£**<T extends Lengthwise>**
>
> 1. æˆ‘ä»¬å°†**<T extends Lengthwise>**æš‚æ—¶ç†è§£ä¸ºä¸€ä¸ªæ–°çš„è®¡ç®—ç±»å‹**<computedT>**ï¼Œä»–æ˜¯é€šè¿‡è®¡ç®—åè·å¾—çš„ä¸€ä¸ªæ–°çš„ç±»å‹
> 2. Tæ•è·æˆ‘ä»¬ä¼ å…¥å‚æ•°çš„ç±»å‹T
> 3. <computedT>å³ï¼šå‚æ•°ç±»å‹Tç»§æ‰¿æ¥å£Lengthwise,æ»¡è¶³Tç±»å‹çº¦æŸåŒæ—¶æ»¡è¶³Lengthwiseçº¦æŸ

## åœ¨æ³›å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹å‚æ•°

> ä½ å¯ä»¥å£°æ˜ä¸€ä¸ªç±»å‹å‚æ•°ï¼Œä¸”å®ƒè¢«å¦ä¸€ä¸ªç±»å‹å‚æ•°æ‰€çº¦æŸã€‚ æ¯”å¦‚ï¼Œç°åœ¨æˆ‘ä»¬æƒ³è¦ç”¨å±æ€§åä»å¯¹è±¡é‡Œè·å–è¿™ä¸ªå±æ€§ã€‚ å¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¡®ä¿è¿™ä¸ªå±æ€§å­˜åœ¨äºå¯¹è±¡ `obj`ä¸Šï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¿™ä¸¤ä¸ªç±»å‹ä¹‹é—´ä½¿ç”¨çº¦æŸã€‚

```ts
function getProperty(obj: T, key: K) {
    return obj[key];
}   
let x = { a: 1, b: 2, c: 3, d: 4 };
getProperty(x, "a"); // okay
getProperty(x, "m"); // error: Argument of type 'm' isn't assignable to 'a' | 'b' | 'c' | 'd'.
```
