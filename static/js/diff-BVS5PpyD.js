function t(){}function o(t,o,n,e,r){for(var i,u=[];o;)u.push(o),i=o.previousComponent,delete o.previousComponent,o=i;u.reverse();for(var s=0,a=u.length,l=0,p=0;s<a;s++){var c=u[s];if(c.removed){if(c.value=t.join(e.slice(p,p+c.count)),p+=c.count,s&&u[s-1].added){var f=u[s-1];u[s-1]=u[s],u[s]=f}}else{if(!c.added&&r){var v=n.slice(l,l+c.count);v=v.map((function(t,o){var n=e[p+o];return n.length>t.length?n:t})),c.value=t.join(v)}else c.value=t.join(n.slice(l,l+c.count));l+=c.count,c.added||(p+=c.count)}}var d=u[a-1];return a>1&&"string"==typeof d.value&&(d.added||d.removed)&&t.equals("",d.value)&&(u[a-2].value+=d.value,u.pop()),u}t.prototype={diff:function(t,n){var e,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.callback;"function"==typeof r&&(i=r,r={}),this.options=r;var u=this;function s(t){return i?(setTimeout((function(){i(void 0,t)}),0),!0):t}t=this.castInput(t),n=this.castInput(n),t=this.removeEmpty(this.tokenize(t));var a=(n=this.removeEmpty(this.tokenize(n))).length,l=t.length,p=1,c=a+l;r.maxEditLength&&(c=Math.min(c,r.maxEditLength));var f=null!==(e=r.timeout)&&void 0!==e?e:1/0,v=Date.now()+f,d=[{oldPos:-1,lastComponent:void 0}],h=this.extractCommon(d[0],n,t,0);if(d[0].oldPos+1>=l&&h+1>=a)return s([{value:this.join(n),count:n.length}]);var m=-1/0,g=1/0;function y(){for(var e=Math.max(m,-p);e<=Math.min(g,p);e+=2){var r=void 0,i=d[e-1],c=d[e+1];i&&(d[e-1]=void 0);var f=!1;if(c){var v=c.oldPos-e;f=c&&0<=v&&v<a}var y=i&&i.oldPos+1<l;if(f||y){if(r=!y||f&&i.oldPos+1<c.oldPos?u.addToPath(c,!0,void 0,0):u.addToPath(i,void 0,!0,1),h=u.extractCommon(r,n,t,e),r.oldPos+1>=l&&h+1>=a)return s(o(u,r.lastComponent,n,t,u.useLongestToken));d[e]=r,r.oldPos+1>=l&&(g=Math.min(g,e-1)),h+1>=a&&(m=Math.max(m,e+1))}else d[e]=void 0}p++}if(i)!function t(){setTimeout((function(){if(p>c||Date.now()>v)return i();y()||t()}),0)}();else for(;p<=c&&Date.now()<=v;){var C=y();if(C)return C}},addToPath:function(t,o,n,e){var r=t.lastComponent;return r&&r.added===o&&r.removed===n?{oldPos:t.oldPos+e,lastComponent:{count:r.count+1,added:o,removed:n,previousComponent:r.previousComponent}}:{oldPos:t.oldPos+e,lastComponent:{count:1,added:o,removed:n,previousComponent:r}}},extractCommon:function(t,o,n,e){for(var r=o.length,i=n.length,u=t.oldPos,s=u-e,a=0;s+1<r&&u+1<i&&this.equals(o[s+1],n[u+1]);)s++,u++,a++;return a&&(t.lastComponent={count:a,previousComponent:t.lastComponent}),t.oldPos=u,s},equals:function(t,o){return this.options.comparator?this.options.comparator(t,o):t===o||this.options.ignoreCase&&t.toLowerCase()===o.toLowerCase()},removeEmpty:function(t){for(var o=[],n=0;n<t.length;n++)t[n]&&o.push(t[n]);return o},castInput:function(t){return t},tokenize:function(t){return t.split("")},join:function(t){return t.join("")}};var n=new t;function e(t,o,e){return n.diff(t,o,e)}var r=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,i=/\S/,u=new t;u.equals=function(t,o){return this.options.ignoreCase&&(t=t.toLowerCase(),o=o.toLowerCase()),t===o||this.options.ignoreWhitespace&&!i.test(t)&&!i.test(o)},u.tokenize=function(t){for(var o=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<o.length-1;n++)!o[n+1]&&o[n+2]&&r.test(o[n])&&r.test(o[n+2])&&(o[n]+=o[n+2],o.splice(n+1,2),n--);return o};var s=new t;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s.tokenize=function(t){this.options.stripTrailingCr&&(t=t.replace(/\r\n/g,"\n"));var o=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var e=0;e<n.length;e++){var r=n[e];e%2&&!this.options.newlineIsToken?o[o.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),o.push(r))}return o},(new t).tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)},(new t).tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};var l=Object.prototype.toString,p=new t;function c(t,o,n,e,r){var i,u;for(o=o||[],n=n||[],e&&(t=e(r,t)),i=0;i<o.length;i+=1)if(o[i]===t)return n[i];if("[object Array]"===l.call(t)){for(o.push(t),u=new Array(t.length),n.push(u),i=0;i<t.length;i+=1)u[i]=c(t[i],o,n,e,r);return o.pop(),n.pop(),u}if(t&&t.toJSON&&(t=t.toJSON()),"object"===a(t)&&null!==t){o.push(t),u={},n.push(u);var s,p=[];for(s in t)t.hasOwnProperty(s)&&p.push(s);for(p.sort(),i=0;i<p.length;i+=1)u[s=p[i]]=c(t[s],o,n,e,s);o.pop(),n.pop()}else u=t;return u}p.useLongestToken=!0,p.tokenize=s.tokenize,p.castInput=function(t){var o=this.options,n=o.undefinedReplacement,e=o.stringifyReplacer,r=void 0===e?function(t,o){return void 0===o?n:o}:e;return"string"==typeof t?t:JSON.stringify(c(t,null,null,r),r,"  ")},p.equals=function(o,n){return t.prototype.equals.call(p,o.replace(/,([\r\n])/g,"$1"),n.replace(/,([\r\n])/g,"$1"))};var f=new t;f.tokenize=function(t){return t.slice()},f.join=f.removeEmpty=function(t){return t};export{e as d};
