import{u as e}from"../../../@vue-runtime-dom-CmJM4nE0.js";import{u as s}from"../../../vuex-BhxYhhdL.js";import{B as t,S as i,M as a,O as l}from"../../../@better-scroll-DQq3duai.js";import{d as r}from"../../common/util/debounce-CNl5k4zp.js";import{l as o}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as n}from"./components/left-sidebar-item-uxk3NM7s.js";import{c as m}from"../commonm-btn/index-Bp6UIeO3.js";import{l as c}from"./components/left-sidebar-search-B4uwjOU_.js";import{S as u,a as d,b as f,c as p,d as h}from"../../store/actionType-BVA9uGQF.js";import{j as b,b as v,e as g,f as C,n as k}from"../../../@vue-runtime-core-DQcPG1cz.js";import{r as L}from"../../../@vue-reactivity-v2zUdFSg.js";t.use(i),t.use(a),t.use(l);const x={name:"components-left-sidebar",components:{leftSidebarItem:n,leftSidebarSearch:c,commonmBtn:m},props:{...o},setup(e,{emit:i}){const a=s(),l=v((()=>a.state.menuData.menuList)),o=v((()=>{let s="left-sidebar shrink-0 bg-style h-[100%]";return s=e.ifLarger?`${s}`:`${s} absolute ${e.ifShowMenu?"translate-x-[0]":"translate-x-[-100%]"}`,s})),n=L(null),m=L(null),c=()=>{n.value&&n.value.destroy(),n.value=null};return g((()=>e.ifLarger),(e=>{a.dispatch(h).then((()=>{e&&l.value.length?(c(),k().then((()=>{n.value=new t(m.value,{click:!0,observeDOM:!0,bounce:!1,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},mouseWheel:{speed:20,invert:!1,easeTime:300}})}))):c()}))}),{immediate:!0}),C((()=>{c()})),{menuList:l,listContentRef:m,menuListCloseAll:()=>{r((()=>{a.dispatch(p)}),1e3,!0)},sidebarClassName:o,leftSidebarItemClick:(s,t,l)=>{a.dispatch(d,l.indexPage),a.dispatch(f,l),e.toggleMenu(!1),i("itemClick",l)},leftSidebarListClick:(e,s)=>{a.dispatch(u,s),a.dispatch(d,s.indexPage),i("listClick",s)}}},render(){return b("div",{class:this.sidebarClassName},[this.menuList.length?b("div",{class:"flex h-[100%] relative flex-col left-sidebar-content"},[b(c,{class:"search",toggleMenu:this.toggleMenu,onItemClick:(e,s)=>{this.leftSidebarItemClick(e,[],s)},onMenuListCloseAll:this.menuListCloseAll},null),b("div",{key:this.ifLarger,class:"flex-1 shrink-0 relative list-wrap "+(this.ifLarger?"overflow-y-hidden":"overflow-y-auto")},[b("div",{ref:e=>{this.listContentRef=e},class:"list-content h-[100%] "+(this.ifLarger?"overflow-y-hidden":"")},[b("div",{style:{padding:"0 0 50px 0"}},[this.menuList.map(((e,s)=>b(n,{rowDetails:e,key:`-1-${s}-${e.indexPage}`,grade:-1,menuList:this.menuList,url:[e.name],onItemClick:(e,s,t)=>{this.leftSidebarItemClick(e,s,t)},onListClick:(e,s)=>{this.leftSidebarListClick(e,s)}},null)))])])])]):null])}},j=()=>{e((e=>({"33f8f5f2":e.leftSidebarW})))},S=x.setup;x.setup=S?(e,s)=>(j(),S(e,s)):j;export{x as _};
