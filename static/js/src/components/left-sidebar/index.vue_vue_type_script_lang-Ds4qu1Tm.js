import{u as e}from"../../../@vue-runtime-dom-Dkxbnx-0.js";import{u as t}from"../../../vuex-C9rRLaBQ.js";import{B as s,S as i,M as a,O as l}from"../../../@better-scroll-yEU79_0X.js";import{d as r}from"../../common/util/debounce-CNl5k4zp.js";import{l as o}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as n}from"./components/left-sidebar-item-BJuW53he.js";import{c as m}from"../commonm-btn/index-hUJDFDzu.js";import{l as c}from"./components/left-sidebar-search-C4m5HpGB.js";import{S as u,a as d,b as f,c as h,d as p}from"../../store/actionType-CNHuB-Of.js";import{b,e as v,f as g,j as C,n as L}from"../../../@vue-runtime-core-lkGMyH8G.js";import{r as k}from"../../../@vue-reactivity-mdokXGQ5.js";s.use(i),s.use(a),s.use(l);const x={name:"components-left-sidebar",components:{leftSidebarItem:n,leftSidebarSearch:c,commonmBtn:m},props:{...o},setup(e,{emit:i}){const a=t(),l=b((()=>a.state.menuData.menuList)),o=b((()=>{let t="left-sidebar flex-shrink-0 bg-white height100";return t=e.ifLarger?`${t}`:`${t} absolute ${e.ifShowMenu?"translateX-0":"translateX-100"}`,t})),n=k(null),m=k(null),c=()=>{n.value&&n.value.destroy(),n.value=null};return v((()=>e.ifLarger),(e=>{a.dispatch(h).then((()=>{e&&l.value.length?(c(),L().then((()=>{n.value=new s(m.value,{click:!0,observeDOM:!0,bounce:!1,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},mouseWheel:{speed:20,invert:!1,easeTime:300}})}))):c()}))}),{immediate:!0}),g((()=>{c()})),{menuList:l,listContentRef:m,menuListCloseAll:()=>{r((()=>{a.dispatch(p)}),1e3,!0)},sidebarClassName:o,leftSidebarItemClick:(t,s,l)=>{a.dispatch(u,l.indexPage),a.dispatch(d,l),e.toggleMenu(!1),i("itemClick",l)},leftSidebarListClick:(e,t)=>{a.dispatch(f,t),a.dispatch(u,t.indexPage),i("listClick",t)}}},render(){return C("div",{class:this.sidebarClassName},[this.menuList.length?C("div",{class:"flex height100 relative flex-direction-column left-sidebar-content"},[C(c,{class:"search",toggleMenu:this.toggleMenu,onItemClick:(e,t)=>{this.leftSidebarItemClick(e,[],t)},onMenuListCloseAll:this.menuListCloseAll},null),C("div",{key:this.ifLarger,class:"flex-1 flex-shrink-0 relative list-wrap "+(this.ifLarger?"overflow-y-hidden":"overflow-y-auto")},[C("div",{ref:e=>{this.listContentRef=e},class:"list-content height100 "+(this.ifLarger?"overflow-y-hidden":"")},[C("div",{style:{padding:"0 0 50px 0"}},[this.menuList.map(((e,t)=>C(n,{rowDetails:e,key:`-1-${t}-${e.indexPage}`,grade:-1,menuList:this.menuList,url:[e.name],onItemClick:(e,t,s)=>{this.leftSidebarItemClick(e,t,s)},onListClick:(e,t)=>{this.leftSidebarListClick(e,t)}},null)))])])])]):null])}},j=()=>{e((e=>({"0d9a353b":e.leftSidebarW})))},S=x.setup;x.setup=S?(e,t)=>(j(),S(e,t)):j;export{x as _};
