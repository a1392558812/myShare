import{u as e}from"../../../@vue-runtime-dom-ByoLcAZV.js";import{u as s}from"../../../vuex-C9rRLaBQ.js";import{B as t,S as i,M as a,O as l}from"../../../@better-scroll-yEU79_0X.js";import{d as r}from"../../common/util/debounce-CNl5k4zp.js";import{l as o}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as n}from"./components/left-sidebar-item-DjsaJ_wE.js";import{c as m}from"../commonm-btn/index-hUJDFDzu.js";import{l as c}from"./components/left-sidebar-search-std4THs7.js";import{S as u,a as d,b as f,c as p,d as h}from"../../store/actionType-CNHuB-Of.js";import{b,e as v,f as g,j as C,n as k}from"../../../@vue-runtime-core-lkGMyH8G.js";import{r as L}from"../../../@vue-reactivity-mdokXGQ5.js";t.use(i),t.use(a),t.use(l);const x={name:"components-left-sidebar",components:{leftSidebarItem:n,leftSidebarSearch:c,commonmBtn:m},props:{...o},setup(e,{emit:i}){const a=s(),l=b((()=>a.state.menuData.menuList)),o=b((()=>{let s="left-sidebar shrink-0 bg-style h-[100%]";return s=e.ifLarger?`${s}`:`${s} absolute ${e.ifShowMenu?"translate-x-[0]":"translate-x-[-100%]"}`,s})),n=L(null),m=L(null),c=()=>{n.value&&n.value.destroy(),n.value=null};return v((()=>e.ifLarger),(e=>{a.dispatch(p).then((()=>{e&&l.value.length?(c(),k().then((()=>{n.value=new t(m.value,{click:!0,observeDOM:!0,bounce:!1,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},mouseWheel:{speed:20,invert:!1,easeTime:300}})}))):c()}))}),{immediate:!0}),g((()=>{c()})),{menuList:l,listContentRef:m,menuListCloseAll:()=>{r((()=>{a.dispatch(h)}),1e3,!0)},sidebarClassName:o,leftSidebarItemClick:(s,t,l)=>{a.dispatch(u,l.indexPage),a.dispatch(d,l),e.toggleMenu(!1),i("itemClick",l)},leftSidebarListClick:(e,s)=>{a.dispatch(f,s),a.dispatch(u,s.indexPage),i("listClick",s)}}},render(){return C("div",{class:this.sidebarClassName},[this.menuList.length?C("div",{class:"flex h-[100%] relative flex-col left-sidebar-content"},[C(c,{class:"search",toggleMenu:this.toggleMenu,onItemClick:(e,s)=>{this.leftSidebarItemClick(e,[],s)},onMenuListCloseAll:this.menuListCloseAll},null),C("div",{key:this.ifLarger,class:"flex-1 shrink-0 relative list-wrap "+(this.ifLarger?"overflow-y-hidden":"overflow-y-auto")},[C("div",{ref:e=>{this.listContentRef=e},class:"list-content h-[100%] "+(this.ifLarger?"overflow-y-hidden":"")},[C("div",{style:{padding:"0 0 50px 0"}},[this.menuList.map(((e,s)=>C(n,{rowDetails:e,key:`-1-${s}-${e.indexPage}`,grade:-1,menuList:this.menuList,url:[e.name],onItemClick:(e,s,t)=>{this.leftSidebarItemClick(e,s,t)},onListClick:(e,s)=>{this.leftSidebarListClick(e,s)}},null)))])])])]):null])}},j=()=>{e((e=>({"33f8f5f2":e.leftSidebarW})))},S=x.setup;x.setup=S?(e,s)=>(j(),S(e,s)):j;export{x as _};
