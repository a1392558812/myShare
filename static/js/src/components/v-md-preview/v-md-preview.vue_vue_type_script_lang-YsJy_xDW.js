const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../css/src/components/loading/loading-Cn048VR9.css"])))=>i.map(i=>d[i]);
import{_ as e}from"../../../vite/preload-helper-Cu0sd_0_.js";import{$ as t}from"../../../jquery-IViRahhZ.js";import{c as s}from"../../../@vue-runtime-dom-DIQGxI75.js";import{P as o}from"../../../prismjs-Bpq7f90a.js";import{V as i,v as n,_ as l,d as r}from"../../../@kangc-1xBPbjGB.js";import{l as a}from"../loading/loading-CBFkRS8_.js";import{r as d}from"../../../@vue-reactivity-UKyDGrvc.js";import{j as p,P as u,e as m,f as c,Q as h,n as v,R as f}from"../../../@vue-runtime-core-hXVbjtl0.js";i.use(n,{Prism:o}),i.use(l()),i.use(r()),i.xss.extend({onIgnoreTag:(e,t,s)=>"iframe"===e?`<div>${t}</div>`:(e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&<>"']/g,(e=>t[e]))})(t)});const g="playground-wrap-loading",w={name:"components-v-md-preview",components:{VMdPreview:i},props:{text:{type:String,default:""},ifLarger:{type:Boolean,default:!0}},setup(o,{emit:i}){const n=d(null),l=d("");let r,h=[],w=[],y=!0;const x=(()=>{let e=t("<div></div>"),o=s(p(a,{style:"font-weight: bold; font-size: 12px; background: transparent"},{default:()=>[p("div",{class:"w-[100%] h-[100%] flex items-center justify-center"},[u("加载中...")])]}),{showModal:!0});o.mount(e[0]);const i=e.html();return o.unmount(),e=null,o=null,i})(),C=()=>{clearTimeout(r),w.length&&w.forEach((e=>{e.app&&e.app.unmount&&(e.app.unmount(),e.app=null)})),r=null,w=[],h=[]};return m((()=>o.text),((o,i)=>{if(o!==i&&o){C();const i=window.$("vue3-sfc").parse(o,!1).replaceWith(((e,t)=>{const s=window.$(t).html(),o=`playground-${e}`;return h.push({str:s,idSelector:o}),`<div style="position: relative; height: 600px; margin: 0.85em 0;">\n              <div class=${g} style="width: 100%; height: 100%; z-index: 0; position: absolute; left: 0; top: 0">${x}</div>\n              <div style="position: relative; height: 100%; z-index: 1; display: block; transform: translateZ(0px); transform-style: preserve-3d;" id="${o}"></div>\n            </div>`})).printHtml();if(!h.length)return void(l.value=o);l.value=i,v((()=>{let o=t(`.${g}`);o.css("display","block"),r=setTimeout((()=>{h.length=1,h.forEach(((o,i)=>{let n=t(`#${o.idSelector}`);if(!n[0])return n.html('<div style="font-size: 16px; font-weight: blod; height: 100%" class="flex items-center justify-center">组件解析失败，请刷新重试...</div>'),void(n=null);const l=s(f((()=>e((()=>import("../playground-plane/index-B5Xmuhn0.js")),__vite__mapDeps([0]),import.meta.url))),{name:o.idSelector,key:new Date,componentsFiles:((e={})=>(window.$("vue3-file").parse(o.str,!1).each(((t,s)=>{const o=window.$(s);let i=o.attr("name");"app.vue"===i.toLowerCase()&&(i="App.vue"),e[i]=o.html()})),e))(),playGroundPlaneWidth:"100%",playGroundPlaneReplHeight:"100%",customCode:{importCode:"",useCode:'console.log("customCode--🥵")'}});l.mount(n[0]),w.push({app:l}),n=null})),o.css("display","none"),o=null,y=!1}),y?0:2e3)}))}}),{immediate:!0}),c((()=>{C()})),{vMdPreviewRef:n,markdowmText:l,getVMdPreviewRef:e=>{n.value=e,i("getVMdPreviewRef",e)},onHandleCopyCodeSuccess:e=>{i("copy-code-success",e)},onHandelClick:e=>{let s=t(e.target);if(s.hasClass("v-md-copy-code-btn")){let e=s.html();s.css({whiteSpace:"nowrap"});let t={width:s.width(),height:s.height(),lineHeight:s.css("line-height"),whiteSpace:"nowrap"};s.html("复制成功"),s.css({width:"5em",height:"2em",lineHeight:"1.5em",transition:"all 0.3s"}),setTimeout((()=>{s.css(t),s.html(e),s=null,e=null,t=null}),1e3)}else s=null;i("click",e)}}},render(){return p(i,h({ref:this.getVMdPreviewRef,text:this.markdowmText},this.$attrs,{"onCopy-code-success":e=>this.onHandleCopyCodeSuccess(e),onClick:e=>{this.onHandelClick(e)}}),null)}};export{w as _};
