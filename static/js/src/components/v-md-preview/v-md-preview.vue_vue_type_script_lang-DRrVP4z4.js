const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../css/src/components/loading/loading-Cn048VR9.css"])))=>i.map(i=>d[i]);
import{_ as e}from"../../../vite/preload-helper-Cu0sd_0_.js";import{$ as t}from"../../../jquery-IViRahhZ.js";import{r as s,c as o}from"../../../@vue-runtime-dom-ByoLcAZV.js";import{P as i}from"../../../prismjs-Bpq7f90a.js";import{V as l,v as n,_ as r,d as a}from"../../../@kangc-CWiLCLrm.js";import{l as d}from"../loading/loading-CS82ZUo3.js";import{r as p}from"../../../@vue-reactivity-mdokXGQ5.js";import{j as u,P as m,e as c,f as h,Q as v,n as f,R as g}from"../../../@vue-runtime-core-lkGMyH8G.js";l.use(n,{Prism:i}),l.use(r()),l.use(a()),l.xss.extend({onIgnoreTag:(e,t,s)=>"iframe"===e?`<div>${t}</div>`:(e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};return e.replace(/[&<>"']/g,(e=>t[e]))})(t)});const w="playground-wrap-loading",y={name:"components-v-md-preview",components:{VMdPreview:l},props:{text:{type:String,default:""},ifLarger:{type:Boolean,default:!0}},setup(i,{emit:l}){const n=p(null),r=p("");let a,v=[],y=[],x=!0;const j=(()=>{let e=t("<div></div>");s(u(u(d,{style:"font-weight: bold; font-size: 12px; background: transparent"},{default:()=>[u("div",{class:"w-[100%] h-[100%] flex items-center justify-center"},[m("加载中...")])]}),{showModal:!0}),e[0]);const o=e.html();return e=null,o})(),C=()=>{clearTimeout(a),y.length&&y.forEach((e=>{e.app&&e.app.unmount&&(e.app.unmount(),e.app=null)})),a=null,y=[],v=[]};return c((()=>i.text),((s,i)=>{if(s!==i&&s){C();const i=window.$("vue3-sfc").parse(s,!1).replaceWith(((e,t)=>{const s=window.$(t).html(),o=`playground-${e}`;return v.push({str:s,idSelector:o}),`<div style="position: relative; height: 600px; margin: 0.85em 0;">\n              <div class=${w} style="width: 100%; height: 100%; z-index: 0; position: absolute; left: 0; top: 0">${j}</div>\n              <div style="position: relative; height: 100%; z-index: 1; display: block; transform: translateZ(0px); transform-style: preserve-3d;" id="${o}"></div>\n            </div>`})).printHtml();if(!v.length)return void(r.value=s);r.value=i,f((()=>{let s=t(`.${w}`);s.css("display","block"),a=setTimeout((()=>{v.length=1,v.forEach(((s,i)=>{let l=t(`#${s.idSelector}`);if(!l[0])return l.html('<div style="font-size: 16px; font-weight: blod; height: 100%" class="flex items-center justify-center">组件解析失败，请刷新重试...</div>'),void(l=null);const n=o(g((()=>e((()=>import("../playground-plane/index-B7XtbmQl.js")),__vite__mapDeps([0]),import.meta.url))),{name:s.idSelector,key:new Date,componentsFiles:((e={})=>(window.$("vue3-file").parse(s.str,!1).each(((t,s)=>{const o=window.$(s);let i=o.attr("name");"app.vue"===i.toLowerCase()&&(i="App.vue"),e[i]=o.html()})),e))(),playGroundPlaneWidth:"100%",playGroundPlaneReplHeight:"100%",customCode:{importCode:"",useCode:'console.log("customCode--🥵")'}});n.mount(l[0]),y.push({app:n}),l=null})),s.css("display","none"),s=null,x=!1}),x?0:2e3)}))}}),{immediate:!0}),h((()=>{C()})),{vMdPreviewRef:n,markdowmText:r,getVMdPreviewRef:e=>{n.value=e,l("getVMdPreviewRef",e)},onHandleCopyCodeSuccess:e=>{l("copy-code-success",e)},onHandelClick:e=>{let s=t(e.target);if(s.hasClass("v-md-copy-code-btn")){let e=s.html();s.css({whiteSpace:"nowrap"});let t={width:s.width(),height:s.height(),lineHeight:s.css("line-height"),whiteSpace:"nowrap"};s.html("复制成功"),s.css({width:"5em",height:"2em",lineHeight:"1.5em",transition:"all 0.3s"}),setTimeout((()=>{s.css(t),s.html(e),s=null,e=null,t=null}),1e3)}else s=null;l("click",e)}}},render(){return u(l,v({ref:this.getVMdPreviewRef,text:this.markdowmText},this.$attrs,{"onCopy-code-success":e=>this.onHandleCopyCodeSuccess(e),onClick:e=>{this.onHandelClick(e)}}),null)}};export{y as _};
