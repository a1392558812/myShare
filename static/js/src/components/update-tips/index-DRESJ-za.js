import{u as e}from"../../../@vite-plugin-pwa-CYNA9wI1.js";import{c as t}from"../commonm-btn/index-BgmKgvkM.js";import{k as a}from"../../../@vue-shared-LkD7rn4X.js";import{b as n,a as o,g as s,l as i,c as l,k as r,P as c,s as u,j as v}from"../../../@vue-runtime-core-hXVbjtl0.js";import{r as d,u as f}from"../../../@vue-reactivity-UKyDGrvc.js";const m={key:0,class:"w-full h-full fixed top-0 left-0 z-50 flex flex-col items-center justify-center bg-[rgba(0,0,0,0.8)]"},p={class:"mb-[150px] text-[50px] font-900 text-[var(--global-primary-color)]"},g={class:"flex items-center justify-center"},x={__name:"index",setup(x){const h=d(!1);function k(e,t){setInterval((async()=>{if("onLine"in navigator&&!navigator.onLine)return;const a=await fetch(e,{cache:"no-store",headers:{cache:"no-store","cache-control":"no-cache"}});200===(null==a?void 0:a.status)&&await t.update()}),36e5)}const{offlineReady:y,needRefresh:j,updateServiceWorker:b}=e({immediate:!0,onRegisteredSW(e,t){var a;"activated"===(null==(a=null==t?void 0:t.active)?void 0:a.state)?(h.value=!0,k(e,t)):(null==t?void 0:t.installing)&&t.installing.addEventListener("statechange",(a=>{const n=a.target;h.value="activated"===n.state,h.value&&k(e,t)}))},onNeedRefresh(){},onOfflineReady(){},onRegistered(){},onRegisterError(e){}}),R=n((()=>y.value?"App ready to work offline":j.value?"New content available, click on reload button to update.":""));function w(){y.value=!1,j.value=!1}return(e,n)=>f(j)?(o(),s("div",m,[i("div",p,[i("span",null,a(R.value||"内容有更新"),1)]),i("div",g,[f(j)?(o(),l(t,{key:0,class:"mr-[20px]",onBtnClick:f(b)},{default:r((()=>[c(" 重新加载 ")])),_:1},8,["onBtnClick"])):u("",!0),v(t,{onBtnClick:w},{default:r((()=>[c("关闭")])),_:1})])])):u("",!0)}};export{x as _};
