import{u as e}from"../../../@vite-plugin-pwa-D-k807zu.js";import{c as t}from"../commonm-btn/index-Bp6UIeO3.js";import{b as a,g as n,s as o,a as s,l as i,c as l,j as r,k as c,P as u}from"../../../@vue-runtime-core-DQcPG1cz.js";import{k as v}from"../../../@vue-shared-C0QUMStP.js";import{r as d,u as f}from"../../../@vue-reactivity-v2zUdFSg.js";const m={key:0,class:"w-full h-full fixed top-0 left-0 z-50 flex flex-col items-center justify-center bg-[rgba(0,0,0,0.8)]"},p={class:"mb-[150px] text-[50px] font-900 text-[var(--global-primary-color)]"},g={class:"flex items-center justify-center"},x={__name:"index",setup(x){const h=d(!1);function k(e,t){setInterval((async()=>{if("onLine"in navigator&&!navigator.onLine)return;const a=await fetch(e,{cache:"no-store",headers:{cache:"no-store","cache-control":"no-cache"}});200===(null==a?void 0:a.status)&&await t.update()}),36e5)}const{offlineReady:y,needRefresh:j,updateServiceWorker:b}=e({immediate:!0,onRegisteredSW(e,t){var a;"activated"===(null==(a=null==t?void 0:t.active)?void 0:a.state)?(h.value=!0,k(e,t)):(null==t?void 0:t.installing)&&t.installing.addEventListener("statechange",(a=>{const n=a.target;h.value="activated"===n.state,h.value&&k(e,t)}))},onNeedRefresh(){},onOfflineReady(){},onRegistered(){},onRegisterError(e){}}),R=a((()=>y.value?"App ready to work offline":j.value?"New content available, click on reload button to update.":""));function w(){y.value=!1,j.value=!1}return(e,a)=>f(j)?(s(),n("div",m,[i("div",p,[i("span",null,v(R.value||"内容有更新"),1)]),i("div",g,[f(j)?(s(),l(t,{key:0,class:"mr-[20px]",onBtnClick:f(b)},{default:c((()=>[u(" 重新加载 ")])),_:1},8,["onBtnClick"])):o("",!0),r(t,{onBtnClick:w},{default:c((()=>[u("关闭")])),_:1})])])):o("",!0)}};export{x as _};
