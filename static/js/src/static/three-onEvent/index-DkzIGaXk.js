import{T as e}from"../../../three-DLFuJBtA.js";(e=>{const t={gaze:{},click:{},hover:{}},n=[],c={},o={};Object.keys(t).forEach((function(e,t){c[e]={flag:!1,listener:function(t){o[e](t,i.camera)}}}));var i={};function r(e){const t=[];for(const n in e){const c=e[n].object3d;t.push(c)}return a(t)}function a(e){let t=[];for(const n in e)"Group"===e[n].type?t=t.concat(a(e[n].children)):t.push(e[n]);return t}function l(e,t){return s(e,t)}function s(e,t){return e[t.id]?e[t.id]:s(e,t.parent)}e.onEvent=function(e,t){i.scene=e||{},i.camera=t||{}},e.onEvent.prototype.removeAll=function(){for(const e in t)for(const n in t[e])delete t[e][n]},e.onEvent.prototype.update=function(){for(const e in n)n[e]()},Object.assign(e.Object3D.prototype,{on:function(e,n,o){if(c.hasOwnProperty(e)){t[e][this.id]={object3d:this,callback:Array.from(arguments).slice(1)};const n=c[e];n.flag||(n.flag=!0,n.listener(t[e]))}},off:function(e){if(e)c.hasOwnProperty(e)&&delete t[e][this.id];else for(const n in t)delete t[n][this.id]}}),o.gaze=function(t,c){let o,i,a=!1;const s=new e.Raycaster;n.push((function(){if(t){let n=[];s.setFromCamera(new e.Vector2,c),n=r(t);const f=s.intersectObjects(n);f.length>0?a||(a=!0,o=f[0].object,i=l(t,o),i.callback[0]&&i.callback[0](o)):(a&&i.callback[1]&&i.callback[1](o),a=!1)}}))},o.click=function(t,n){let c,o,i=!1;const a=new e.Raycaster;window.addEventListener("mousedown",(function(s){if(s.preventDefault(),!t)return;let f=[];a.setFromCamera(new e.Vector2(s.clientX/window.innerWidth*2-1,-s.clientY/window.innerHeight*2+1),n),f=r(t);const u=a.intersectObjects(f);if(u.length>0){if(i)return;i=!0,c=u[0].object,o=l(t,c)}else i=!1}),!1),window.addEventListener("mousemove",(function(e){e.preventDefault(),i&&(i=!1)}),!1),window.addEventListener("mouseup",(function(e){e.preventDefault(),i&&o.callback[0]&&o.callback[0](c),i=!1}),!1)},o.hover=function(t,n){let c,o,i=!1;const a=new e.Raycaster;window.addEventListener("mousemove",(function(s){if(s.preventDefault(),!t)return;let f=[];a.setFromCamera(new e.Vector2(s.clientX/window.innerWidth*2-1,-s.clientY/window.innerHeight*2+1),n),f=r(t);const u=a.intersectObjects(f);if(u.length>0){if(i)return;i=!0,c=u[0].object,o=l(t,c),o.callback[0]&&o.callback[0](c)}else i&&o.callback[1]&&o.callback[1](c),i=!1}),!1)}})(e);
