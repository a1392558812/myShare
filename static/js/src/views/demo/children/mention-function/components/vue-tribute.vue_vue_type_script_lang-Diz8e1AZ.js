import{$ as t}from"../../../../../../jquery-IViRahhZ.js";import"../../../../../../tributejs-COWOt0o1.js";import"../../../../../static/tribute/index-C6blBvLc.js";import{T as e}from"../../../../../static/tribute/tribute-DaPSKTRJ.js";import{d as a,o as r,f as u,e as i,n,j as s}from"../../../../../../@vue-runtime-core-lkGMyH8G.js";import{r as l,u as o}from"../../../../../../@vue-reactivity-mdokXGQ5.js";const v=a({name:"vue-tribute",props:{options:{type:Object,default:()=>({collection:[{values:[]}]}),required:!0}},setup(a,v){if(void 0===e)throw new Error("[vue-tribute] cannot locate tributejs.");const c=l(null),b=l(null),d=(t,r=a.options)=>{if(!t.value)return;const u=new e(o(r));v.emit("initTribute",u),u.attach(t.value),t.value.tributeInstance=u};r((()=>{if(b.value=c.value?t(c.value).children()[0]:null,!b.value)throw new Error("[vue-tribute] 包裹组件下无插槽内容组件");d(b),b.value.addEventListener("tribute-replaced",(t=>{var e;null==(e=t.target)||e.dispatchEvent(new Event("input",{bubbles:!0}))}))}));const p=t=>{var e;(null==(e=t.value)?void 0:e.tributeInstance)&&(t.value.tributeInstance.detach(t.value),t.value.tributeInstance=void 0,delete t.value.dataset.tribute)};return u((()=>{p(b)})),i((()=>a.options),(async t=>{var e;(null==(e=b.value)?void 0:e.tributeInstance)&&(await n(),p(b),await n(),d(b,{...t}))}),{deep:!0}),()=>s("div",{class:"v-tribute",ref:c},[[v.slots.default?v.slots.default()[0]:null].filter(Boolean)])}});export{v as _};
