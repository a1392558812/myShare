import{a as e,w as a}from"../../../../../@vue-runtime-dom-Dkxbnx-0.js";import{J as t}from"../../../../static/jsmpeg/jsmpeg.min-DpdUWtYI.js";import{b as s}from"../../../../common/util/methods-G0pJ8i8C.js";import{a as n,b as l}from"../../../../common/util/typeCheck-CZoBiYEg.js";import{_ as o}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as i}from"../../../../../@vue-reactivity-mdokXGQ5.js";import{n as u,a as r,g as m,l as c,m as v,x as p,y as d}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{k as b}from"../../../../../@vue-shared-LkD7rn4X.js";import"../../../../../axios-DPD4D5Qz.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";const f={name:"view-demo-canvas-ts-video",setup(){let e;const a=i(null),o=i(0),r=i(0),m=i("");let c;const v=a=>{(void 0!==a?!a:e.isPlaying)?e.pause():e.play()},p=()=>{r.value=+e.currentTime.toFixed(0),clearTimeout(c),c=setTimeout((()=>{p()}),200)};return u().then((()=>{e=new t.Player(s()+"demo-static/canvas-ts-video/video.ts",{canvas:a.value,autoplay:!0,disableWebAssembly:!0,onPlay:()=>{m.value="onPlay"},onPause:()=>{m.value="onPause"},onEnded:()=>{m.value="播放完了"},onStalled:()=>{m.value="缓冲中..."},onSourceEstablished:()=>{m.value="首次接收到数据"},onSourceCompleted:()=>{m.value="缓冲完所有数据"}}),p()})),{canvasRef:a,onInput:e=>{[n(+e.target.value),Number.isNaN(+e.target.value),!l(+e.target.value),+e.target.value>10,+e.target.value<0].includes(!0)?o.value=0:o.value=+e.target.value},currentTime:r,inputValue:o,videoTipInfo:m,setToggle:v,setCurrentTime:()=>{e.currentTime=o.value,e.nextFrame(),v(!0)}}}},g=e=>(p("data-v-9423a347"),e=e(),d(),e),j={class:"flex flex-col items-center justify-center"},T={width:"426",height:"240",ref:"canvasRef",class:"canvas-view"},y=[g((()=>c("span",{class:"inline-block label"},"暂停/播放",-1)))],h=g((()=>c("span",{class:"inline-block label"},"在第",-1))),k=g((()=>c("span",{class:"inline-block label"},"秒处播放播放",-1)));const x=o(f,[["render",function(t,s,n,l,o,i){return r(),m("div",j,[c("div",null,[c("canvas",T,null,512),c("div",null,[c("div",null,"时长："+b(l.currentTime)+"s/10s",1),c("div",null,b(l.videoTipInfo),1),c("button",{class:"video-btn",onClick:s[0]||(s[0]=function(){l.setToggle()})},y),c("button",{class:"video-btn",onClick:s[3]||(s[3]=(...e)=>l.setCurrentTime&&l.setCurrentTime(...e))},[h,v(c("input",{class:"inline-block label",onClick:a((()=>{}),["stop"]),type:"number","onUpdate:modelValue":s[1]||(s[1]=e=>l.inputValue=e),onInput:s[2]||(s[2]=(...e)=>l.onInput&&l.onInput(...e))},null,544),[[e,l.inputValue]]),k])])])])}],["__scopeId","data-v-9423a347"]]);export{x as default};
