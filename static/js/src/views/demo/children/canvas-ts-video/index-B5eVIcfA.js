import{a as e,w as a}from"../../../../../@vue-runtime-dom-CmJM4nE0.js";import{J as t}from"../../../../static/jsmpeg/jsmpeg.min-DpdUWtYI.js";import{b as s}from"../../../../common/util/methods-C-Gwc4Ne.js";import{a as l,b as n}from"../../../../common/util/typeCheck-CZoBiYEg.js";import{_ as o}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{g as i,a as u,l as r,m,n as c,t as v,x as p}from"../../../../../@vue-runtime-core-DQcPG1cz.js";import{k as d}from"../../../../../@vue-shared-C0QUMStP.js";import{r as b}from"../../../../../@vue-reactivity-v2zUdFSg.js";import"../../../../../axios-CAFaAR0X.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";const f={name:"view-demo-canvas-ts-video",setup(){let e;const a=b(null),o=b(0),i=b(0),u=b("");let r;const m=a=>{(void 0!==a?!a:e.isPlaying)?e.pause():e.play()},v=()=>{i.value=+e.currentTime.toFixed(0),clearTimeout(r),r=setTimeout((()=>{v()}),200)};return c().then((()=>{e=new t.Player(s()+"demo-static/canvas-ts-video/video.ts",{canvas:a.value,autoplay:!0,disableWebAssembly:!0,onPlay:()=>{u.value="onPlay"},onPause:()=>{u.value="onPause"},onEnded:()=>{u.value="播放完了"},onStalled:()=>{u.value="缓冲中..."},onSourceEstablished:()=>{u.value="首次接收到数据"},onSourceCompleted:()=>{u.value="缓冲完所有数据"}}),v()})),{canvasRef:a,onInput:e=>{[l(+e.target.value),Number.isNaN(+e.target.value),!n(+e.target.value),+e.target.value>10,+e.target.value<0].includes(!0)?o.value=0:o.value=+e.target.value},currentTime:i,inputValue:o,videoTipInfo:u,setToggle:m,setCurrentTime:()=>{e.currentTime=o.value,e.nextFrame(),m(!0)}}}},g=e=>(v("data-v-9423a347"),e=e(),p(),e),j={class:"flex flex-col items-center justify-center"},T={width:"426",height:"240",ref:"canvasRef",class:"canvas-view"},y=[g((()=>r("span",{class:"inline-block label"},"暂停/播放",-1)))],h=g((()=>r("span",{class:"inline-block label"},"在第",-1))),k=g((()=>r("span",{class:"inline-block label"},"秒处播放播放",-1)));const x=o(f,[["render",function(t,s,l,n,o,c){return u(),i("div",j,[r("div",null,[r("canvas",T,null,512),r("div",null,[r("div",null,"时长："+d(n.currentTime)+"s/10s",1),r("div",null,d(n.videoTipInfo),1),r("button",{class:"video-btn",onClick:s[0]||(s[0]=function(){n.setToggle()})},y),r("button",{class:"video-btn",onClick:s[3]||(s[3]=(...e)=>n.setCurrentTime&&n.setCurrentTime(...e))},[h,m(r("input",{class:"inline-block label",onClick:a((()=>{}),["stop"]),type:"number","onUpdate:modelValue":s[1]||(s[1]=e=>n.inputValue=e),onInput:s[2]||(s[2]=(...e)=>n.onInput&&n.onInput(...e))},null,544),[[e,n.inputValue]]),k])])])])}],["__scopeId","data-v-9423a347"]]);export{x as default};
