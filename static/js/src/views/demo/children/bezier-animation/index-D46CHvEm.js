import{a as e}from"../../../../../@vue-runtime-dom-CmJM4nE0.js";import{_ as a}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{o as l,y as t,e as u,g as n,a as r,l as s,F as o,q as v,m as x,t as i,x as d}from"../../../../../@vue-runtime-core-DQcPG1cz.js";import{r as c}from"../../../../../@vue-reactivity-v2zUdFSg.js";import{n as y,k as m}from"../../../../../@vue-shared-C0QUMStP.js";const p=e=>(i("data-v-c21df9eb"),e=e(),d(),e),f={class:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white flex flex-col"},b=p((()=>s("header",{class:"py-6 px-4 md:px-8 text-center"},[s("h1",{class:"text-[clamp(1.8rem,4vw,2.8rem)] font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 mb-2"}," 贝塞尔曲线运动演示 "),s("p",{class:"text-gray-400 max-w-2xl mx-auto"}," 调整控制点参数来修改贝塞尔曲线，观察小球的运动轨迹变化。贝塞尔曲线是计算机图形学中常用的曲线，广泛应用于动画过渡效果。 ")],-1))),g={class:"flex-1 flex flex-col md:flex-row items-center justify-center gap-8 p-4 md:p-8 w-full max-w-7xl mx-auto"},h={class:"relative w-full md:w-2/3 h-[400px] bg-gray-800/50 rounded-xl border border-gray-700 shadow-xl overflow-hidden"},w={class:"absolute inset-0 w-full h-full pointer-events-none"},k=["x1","y1","x2","y2"],P=["x1","y1","x2","y2"],j={class:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-3 bg-gray-900/80 px-4 py-2 rounded-full backdrop-blur-sm border border-gray-700"},M=["title"],$={class:"w-full md:w-1/3 space-y-6 bg-gray-800/50 rounded-xl border border-gray-700 shadow-xl p-6"},_=p((()=>s("h2",{class:"text-xl font-semibold mb-4 pb-2 border-b border-gray-700"},"曲线参数控制",-1))),C={class:"space-y-4"},E=p((()=>s("h3",{class:"text-sm font-medium text-gray-300"},"控制点 1 (黄色)",-1))),F={class:"space-y-3"},I={class:"flex justify-between mb-1"},A={class:"text-xs text-gray-400"},L={class:"text-xs text-gray-500"},U=["max"],V={class:"flex justify-between mb-1"},z={class:"text-xs text-gray-400"},q={class:"text-xs text-gray-500"},X=["max"],Y={class:"space-y-4"},B=p((()=>s("h3",{class:"text-sm font-medium text-gray-300"},"控制点 2 (黄色)",-1))),R={class:"space-y-3"},S={class:"flex justify-between mb-1"},T={class:"text-xs text-gray-400"},W={class:"text-xs text-gray-500"},D=["max"],H={class:"flex justify-between mb-1"},G={class:"text-xs text-gray-400"},J={class:"text-xs text-gray-500"},K=["max"],N={class:"space-y-4 pt-2"},O=p((()=>s("h3",{class:"text-sm font-medium text-gray-300"},"动画参数",-1))),Q={class:"space-y-3"},Z={class:"flex justify-between mb-1"},ee={class:"text-xs text-gray-400"},ae={class:"flex justify-between mb-1"},le={class:"text-xs text-gray-400"},te=p((()=>s("div",{class:"p-3 bg-gray-900/60 rounded-lg border border-gray-700 text-sm font-mono overflow-x-auto"},[s("p",{class:"text-gray-400 mb-1"},"三次贝塞尔曲线公式:"),s("p",{class:"text-blue-400"},"B(t) = P₀(1-t)³ + 3P₁t(1-t)² + 3P₂t²(1-t) + P₃t³"),s("p",{class:"text-gray-500 text-xs mt-2"},"t ∈ [0, 1]")],-1))),ue=p((()=>s("footer",{class:"py-4 px-4 text-center text-gray-500 text-sm"},[s("p",null,"拖动控制点或使用滑块调整贝塞尔曲线参数 | 绿色: 起点 | 红色: 终点 | 黄色: 控制点")],-1))),ne=a({__name:"index",setup(a){const i=c(),d=c(),p=c(),ne=c(),re=c(),se=c(),oe=c(0),ve=c(0),xe=c({x:50,y:200}),ie=c({x:150,y:50}),de=c({x:300,y:350}),ce=c({x:450,y:200}),ye=c({x:xe.value.x,y:xe.value.y}),me=c(!1),pe=c(0),fe=c(null),be=c(2e3),ge=c(0),he=c([]),we=c(30),ke=c(!1),Pe=c(""),je=c(0),Me=e=>{const{x:a,y:l}=xe.value,{x:t,y:u}=ie.value,{x:n,y:r}=de.value,{x:s,y:o}=ce.value,v=3*(t-a),x=3*(n-t)-v,i=3*(u-l),d=3*(r-u)-i;return{x:(s-a-v-x)*e*e*e+x*e*e+v*e+a,y:(o-l-i-d)*e*e*e+d*e*e+i*e+l}},$e=()=>{if(!i.value)return;const e=i.value.getContext("2d");e&&(e.clearRect(0,0,oe.value,ve.value),e.beginPath(),e.moveTo(xe.value.x,xe.value.y),e.bezierCurveTo(ie.value.x,ie.value.y,de.value.x,de.value.y,ce.value.x,ce.value.y),e.strokeStyle="rgba(96, 165, 250, 0.7)",e.lineWidth=2,e.stroke(),_e(e))},_e=e=>{he.value=[];for(let a=0;a<=we.value;a++){const l=a/we.value,t=Me(l);he.value.push(t),e.beginPath(),e.arc(t.x,t.y,1.5,0,2*Math.PI),e.fillStyle="rgba(96, 165, 250, 0.3)",e.fill()}},Ce=()=>{$e()},Ee=e=>{if(!me.value)return;ge.value||(ge.value=e);const a=e-ge.value;pe.value=Math.min(a/be.value,1);const l=Me(pe.value);ye.value=l,pe.value<1?fe.value=requestAnimationFrame(Ee):(me.value=!1,ge.value=0,je.value=0)},Fe=()=>{me.value?(me.value=!1,je.value=pe.value,fe.value&&cancelAnimationFrame(fe.value)):(me.value=!0,0===je.value||pe.value>=1?(ge.value=performance.now(),pe.value=0):ge.value=performance.now()-je.value*be.value,fe.value=requestAnimationFrame(Ee))},Ie=()=>{fe.value&&cancelAnimationFrame(fe.value),me.value=!1,pe.value=0,je.value=0,ge.value=0,ye.value={...xe.value}},Ae=()=>{he.value=[],$e()},Le=(e,a)=>{a.preventDefault(),ke.value=!0,Pe.value=e;const l=a=>{if(!ke.value||!i.value)return;const l=i.value.getBoundingClientRect();let t=a.clientX-l.left,u=a.clientY-l.top;t=Math.max(0,Math.min(t,oe.value)),u=Math.max(0,Math.min(u,ve.value)),"startPoint"===e?xe.value={x:t,y:u}:"controlPoint1"===e?ie.value={x:t,y:u}:"controlPoint2"===e?de.value={x:t,y:u}:"endPoint"===e&&(ce.value={x:t,y:u}),$e()},t=()=>{ke.value=!1,document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",l),document.addEventListener("mouseup",t)};return l((()=>{if(i.value){const e=()=>{if(i.value){const e=i.value.parentElement;e&&(oe.value=e.clientWidth,ve.value=e.clientHeight,i.value.width=oe.value,i.value.height=ve.value,50===xe.value.x&&(xe.value={x:.1*oe.value,y:.5*ve.value},ie.value={x:.3*oe.value,y:.2*ve.value},de.value={x:.7*oe.value,y:.8*ve.value},ce.value={x:.9*oe.value,y:.5*ve.value},ye.value={...xe.value}),$e())}};e(),window.addEventListener("resize",e),t((()=>{window.removeEventListener("resize",e),fe.value&&cancelAnimationFrame(fe.value)}))}})),u([ie,de,xe,ce],(()=>{$e()})),t((()=>{fe.value&&cancelAnimationFrame(fe.value)})),(a,l)=>(r(),n("div",f,[b,s("main",g,[s("div",h,[s("canvas",{ref_key:"bezierCanvas",ref:i,class:"absolute inset-0 w-full h-full"},null,512),s("div",{ref_key:"ball",ref:d,class:"absolute w-6 h-6 bg-gradient-to-r from-blue-400 to-purple-500 rounded-full shadow-lg transform -translate-x-1/2 -translate-y-1/2 transition-none",style:y({left:`${ye.value.x}px`,top:`${ye.value.y}px`})},null,4),(r(!0),n(o,null,v(he.value,((e,a)=>(r(),n("div",{key:a,class:"absolute w-1.5 h-1.5 bg-blue-300/30 rounded-full",style:y({left:`${e.x}px`,top:`${e.y}px`})},null,4)))),128)),s("div",{ref_key:"startPoint",ref:p,class:"absolute w-4 h-4 bg-green-400 rounded-full cursor-move shadow-md transform -translate-x-1/2 -translate-y-1/2",style:y({left:`${xe.value.x}px`,top:`${xe.value.y}px`}),onMousedown:l[0]||(l[0]=e=>Le("startPoint",e))},null,36),s("div",{ref_key:"controlPoint1",ref:ne,class:"absolute w-4 h-4 bg-yellow-400 rounded-full cursor-move shadow-md transform -translate-x-1/2 -translate-y-1/2",style:y({left:`${ie.value.x}px`,top:`${ie.value.y}px`}),onMousedown:l[1]||(l[1]=e=>Le("controlPoint1",e))},null,36),s("div",{ref_key:"controlPoint2",ref:re,class:"absolute w-4 h-4 bg-yellow-400 rounded-full cursor-move shadow-md transform -translate-x-1/2 -translate-y-1/2",style:y({left:`${de.value.x}px`,top:`${de.value.y}px`}),onMousedown:l[2]||(l[2]=e=>Le("controlPoint2",e))},null,36),s("div",{ref_key:"endPoint",ref:se,class:"absolute w-4 h-4 bg-red-400 rounded-full cursor-move shadow-md transform -translate-x-1/2 -translate-y-1/2",style:y({left:`${ce.value.x}px`,top:`${ce.value.y}px`}),onMousedown:l[3]||(l[3]=e=>Le("endPoint",e))},null,36),(r(),n("svg",w,[s("line",{x1:xe.value.x,y1:xe.value.y,x2:ie.value.x,y2:ie.value.y,stroke:"rgba(234, 179, 8, 0.3)","stroke-width":"1.5","stroke-dasharray":"4"},null,8,k),s("line",{x1:de.value.x,y1:de.value.y,x2:ce.value.x,y2:ce.value.y,stroke:"rgba(234, 179, 8, 0.3)","stroke-width":"1.5","stroke-dasharray":"4"},null,8,P)])),s("div",j,[s("button",{onClick:Fe,class:"flex items-center justify-center text-[#fff] bg-gray-700 hover:bg-gray-600 transition-colors",title:me.value?"暂停动画":"开始动画"},m(me.value?"暂停动画":"开始动画"),9,M),s("button",{onClick:Ie,class:"flex items-center justify-center text-[#fff] bg-gray-700 hover:bg-gray-600 transition-colors",title:"重置动画"}," 重置动画 "),s("button",{onClick:Ae,class:"flex items-center justify-center text-[#fff] bg-gray-700 hover:bg-gray-600 transition-colors",title:"清除轨迹"}," 清除轨迹 ")])]),s("div",$,[_,s("div",C,[E,s("div",F,[s("div",null,[s("div",I,[s("label",A,"X: "+m(ie.value.x),1),s("span",L,m(Math.round(ie.value.x/oe.value*100))+"%",1)]),x(s("input",{type:"range",min:"0",max:oe.value,"onUpdate:modelValue":l[4]||(l[4]=e=>ie.value.x=e),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500",onInput:Ce},null,40,U),[[e,ie.value.x,void 0,{number:!0}]])]),s("div",null,[s("div",V,[s("label",z,"Y: "+m(ie.value.y),1),s("span",q,m(Math.round(ie.value.y/ve.value*100))+"%",1)]),x(s("input",{type:"range",min:"0",max:ve.value,"onUpdate:modelValue":l[5]||(l[5]=e=>ie.value.y=e),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500",onInput:Ce},null,40,X),[[e,ie.value.y,void 0,{number:!0}]])])])]),s("div",Y,[B,s("div",R,[s("div",null,[s("div",S,[s("label",T,"X: "+m(de.value.x),1),s("span",W,m(Math.round(de.value.x/oe.value*100))+"%",1)]),x(s("input",{type:"range",min:"0",max:oe.value,"onUpdate:modelValue":l[6]||(l[6]=e=>de.value.x=e),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500",onInput:Ce},null,40,D),[[e,de.value.x,void 0,{number:!0}]])]),s("div",null,[s("div",H,[s("label",G,"Y: "+m(de.value.y),1),s("span",J,m(Math.round(de.value.y/ve.value*100))+"%",1)]),x(s("input",{type:"range",min:"0",max:ve.value,"onUpdate:modelValue":l[7]||(l[7]=e=>de.value.y=e),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-yellow-500",onInput:Ce},null,40,K),[[e,de.value.y,void 0,{number:!0}]])])])]),s("div",N,[O,s("div",Q,[s("div",null,[s("div",Z,[s("label",ee,"持续时间: "+m(be.value)+"ms",1)]),x(s("input",{type:"range",min:"500",max:"5000",step:"100","onUpdate:modelValue":l[8]||(l[8]=e=>be.value=e),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"},null,512),[[e,be.value,void 0,{number:!0}]])]),s("div",null,[s("div",ae,[s("label",le,"轨迹点数量: "+m(we.value),1)]),x(s("input",{type:"range",min:"10",max:"100",step:"5","onUpdate:modelValue":l[9]||(l[9]=e=>we.value=e),class:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500",onInput:Ce},null,544),[[e,we.value,void 0,{number:!0}]])])])]),te])]),ue]))}},[["__scopeId","data-v-c21df9eb"]]);export{ne as default};
