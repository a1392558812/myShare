import{W as e,P as a,V as t,S as n,A as o,D as s,a as i,M as d,b as r,c,G as w,d as m,e as p,f as h,g as f,B as l,O as u,C as v}from"../../../../../three-DLFuJBtA.js";import{G as g}from"../../../../../dat.gui-CTkuMhk_.js";import{S as b}from"../../../../../stats.js-vZRaoKIg.js";import{_ as j}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{o as M,a as y,g as S,T as W}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";import"../../../../../@vue-reactivity-mdokXGQ5.js";import"../../../../../@vue-shared-LkD7rn4X.js";const _={name:"view-demo-3d-marie-rose",setup(){let j,y,S,W,_,x,H,k,z;const C=new v;function A(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),j.setSize(window.innerWidth,window.innerHeight)}function P(){!function(){k.update();const e=C.getDelta();z&&z.update(e),j.render(S,y)}(),_.update(),requestAnimationFrame(P)}function B(){W={},new g,j=new e({antialias:!0,logarithmicDepthBuffer:!0}),j.setSize(window.innerWidth,window.innerHeight),j.shadowMap.enabled=!0,document.getElementById("canvas").appendChild(j.domElement),S=new n,y=new a(45,window.innerWidth/window.innerHeight,.1,1e3),y.position.set(0,30,60),y.lookAt(new t(0,0,0)),S.add(y),x=new o("#bbbbbb"),S.add(x),H=new s("#ffffff"),H.position.set(40,60,10),H.shadow.camera.near=1,H.shadow.camera.far=400,H.shadow.camera.left=-50,H.shadow.camera.right=50,H.shadow.camera.top=50,H.shadow.camera.bottom=-50,H.shadow.mapSize.height=1024,H.shadow.mapSize.width=1024,H.castShadow=!0,y.add(H),function(){const e=new i(1e3,1e3),a=new d({color:3355443,side:r}),t=new c(e,a);t.rotation.x=-.5*Math.PI,t.position.y=-.1,t.receiveShadow=!0,S.add(t);const n=new w,o=[];for(let i=0;i<1e3;i++)n.add(u()),o.push({speed:Math.random(),y:-3});S.add(n),window.Worker||alert("你的电脑不支持web Workers");const s=new Worker("demo-static/marie/worker.js");function u(){const e=new f({color:16777215*Math.random()}),a=.5*Math.random(),t=new l(a,a,a),n=new c(t,e);return n.position.set(100*Math.random()-50,-3,100*Math.random()-50),n.speed=Math.random(),n}(new m).load("demo-static/marie/scene.gltf",(function(e){e.scene.scale.set(.1,.1,.1),e.scene.traverse((function(e){e.isMesh&&(e.frustumCulled=!1,e.castShadow=!0)})),S.add(e.scene);const a=e.scene;new p(a),z=new h(a),z.clipAction(e.animations[0]).play(),s.postMessage(o),s.onmessage=function(e){for(let a=0;a<e.data.length;a++)n.children[a].position.y=e.data[a].y}}))}(),_=new b,document.body.appendChild(_.dom),k=new u(y,j.domElement),k.target.set(0,15,0),P(),window.onresize=A}M((()=>{B()}))}},x={class:"relative canvas-wrap"},H=[W('<div id="canvas" data-v-7df2484c></div><div class="absolute lh-none tips" data-v-7df2484c><p style="margin-bottom:10px;" data-v-7df2484c>模型拢共大小30Mb，github这网速，慢慢加载吧</p><p style="margin-bottom:10px;" data-v-7df2484c>这个是学习threejs大佬“暮志未晚”的,</p><p data-v-7df2484c>详情指路：<a href="http://www.wjceo.com/" data-v-7df2484c>http://www.wjceo.com/</a></p></div>',2)];const k=j(_,[["render",function(e,a,t,n,o,s){return y(),S("div",x,H)}],["__scopeId","data-v-7df2484c"]]);export{k as default};
