import{a as e,w as l}from"../../../../../@vue-runtime-dom-ByoLcAZV.js";import{s as t,a as i}from"../../../../../vue-virtual-scroller-CSJ86Zjb.js";import{t as o}from"../../../../components/toast/index-WpZj0xqt.js";import{r as s,g as r}from"../../../../common/util/methods-C08ehvW-.js";import{g as n}from"../../../../common/util/guid-CEQsGVY5.js";import{b as a}from"../../../../common/util/typeCheck-CZoBiYEg.js";import{_ as u}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as c}from"../../../../../@vue-reactivity-mdokXGQ5.js";import{N as d,a as m,g as v,l as f,F as p,P as h,m as b,j as g,k as x,x as y,y as j}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{k,n as S}from"../../../../../@vue-shared-LkD7rn4X.js";import"../../../../../vue-resize-CcdRwCfs.js";import"../../../../../vue-observe-visibility-CpG4rDos.js";import"../../../../../axios-DPD4D5Qz.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";const N=()=>s(400,800),w=(e=30)=>{const l=[];for(let t=0;t<e;t++)l.push({height:s(300,550),width:N(),id:n(),background:r()});return l},_={name:"view-demo-virtual-scroller",components:{DynamicScroller:t,DynamicScrollerItem:i,toast:o},setup(){const e=c([]),l=c(!1),t=c(0),i=c(10),o=c(1),n=c(null),u=c(null),d=(t,i=!1)=>new Promise((o=>{if(l.value)return o();l.value=!0,setTimeout((()=>{e.value=i?w(t):e.value.concat(w(t)),l.value=!1,o()}),1e3)}));return d(10).then(),{list:e,loading:l,scrollerRef:n,toastRef:u,scrollToIndex:t,listNum:i,addListNum:o,onSetSize:(l,t)=>{e.value[t].width=N(),e.value[t].height=s(600,1e3),e.value[t].background=r()},onScrollEnd:()=>{u.value.addToast({content:"即将滚动到底部"})},onScrollTo:()=>{if(null===t.value)return;if(!a(+t.value)||Number.isNaN(+t.value))return void alert("请输入数字");const l=+t.value;l>e.value.length-1||l<0?alert("请输入正确数字范围"):n.value.scrollToItem(l)},onSetList:()=>{null!==i.value&&(a(+i.value)&&!Number.isNaN(+i.value)?d(+i.value,!0).then():alert("请输入数字"))},onAddList:()=>{null!==i.value&&(a(+i.value)&&!Number.isNaN(+i.value)?d(o.value).then((()=>{n.value.scrollToItem(e.value.length-1)})):alert("请输入数字"))}}}},T=e=>(y("data-v-61f4fbe2"),e=e(),j(),e),C={class:"flex flex-col relative virtual-scroller"},L={class:"flex items-center justify-center virtual-scroller-header"},I={style:{"margin-right":"10px"}},z={key:0},D={class:"flex-1 overflow-y-hidden"},E=T((()=>f("div",{style:{"margin-bottom":"20px"},class:"dynamic-scroller-slot flex items-center justify-center"}," 🥵插槽头部🥵 ",-1))),R={class:"dynamic-scroller-item flex items-center justify-center"},$=["id"],A=["onClick"],P={style:{"margin-top":"20px"},class:"dynamic-scroller-slot flex items-center justify-center"},U=T((()=>f("div",{class:"flex items-center justify-center virtual-scroller-bottom"},"#footer",-1)));const V=u(_,[["render",function(t,i,o,s,r,n){const a=d("DynamicScrollerItem"),u=d("DynamicScroller"),c=d("toast");return m(),v("div",C,[f("div",L,[f("div",I,"当前记录条数: "+k(s.list.length),1),s.loading?(m(),v("button",z,"加载中...")):(m(),v(p,{key:1},[f("button",{class:"virtual-scroller-header-btn",onClick:i[1]||(i[1]=(...e)=>s.onSetList&&s.onSetList(...e))},[h(" 重置列表为"),b(f("input",{class:"num-input",onClick:l((()=>{}),["stop"]),"onUpdate:modelValue":i[0]||(i[0]=e=>s.listNum=e)},null,512),[[e,s.listNum,void 0,{number:!0}]]),h("条 ")]),f("button",{class:"virtual-scroller-header-btn",onClick:i[3]||(i[3]=(...e)=>s.onScrollTo&&s.onScrollTo(...e))},[h(" 滚动到第"),b(f("input",{class:"num-input",onClick:l((()=>{}),["stop"]),"onUpdate:modelValue":i[2]||(i[2]=e=>s.scrollToIndex=e)},null,512),[[e,s.scrollToIndex,void 0,{number:!0}]]),h("条 ")]),f("button",{class:"virtual-scroller-header-btn",onClick:i[5]||(i[5]=(...e)=>s.onAddList&&s.onAddList(...e))},[h(" 添加"),b(f("input",{class:"num-input",onClick:l((()=>{}),["stop"]),"onUpdate:modelValue":i[4]||(i[4]=e=>s.addListNum=e)},null,512),[[e,s.addListNum,void 0,{number:!0}]]),h("条记录 ")])],64))]),f("div",D,[g(u,{ref:"scrollerRef",items:s.list,"min-item-size":500,buffer:1e3,class:"scroller",onScrollEnd:s.onScrollEnd},{before:x((()=>[E])),default:x((({item:e,index:l,active:t})=>[g(a,{item:e,active:t,"size-dependencies":[e.width,e.hegiht],"data-index":l},{default:x((()=>[f("div",R,[(m(),v("div",{id:`item-${l}`,class:"dynamic-scroller-item-content",key:e.id,style:S({width:`${e.width}px`,height:`${e.height}px`,background:e.background})},[f("div",null,"width: "+k(e.width),1),f("div",null,"hegiht: "+k(e.hegiht),1),f("div",null,"id: "+k(e.id),1),f("div",null,"background: "+k(e.background),1),f("div",null,"index: "+k(l),1),f("div",null,"active: "+k(t),1),f("button",{onClick:t=>s.onSetSize(e,l)},"重置当前size,变高点",8,A)],12,$))])])),_:2},1032,["item","active","size-dependencies","data-index"])])),after:x((()=>[f("div",P," 🥵"+k(s.loading?"loading....":"插槽底部")+"🥵 ",1)])),_:1},8,["items","onScrollEnd"])]),U,g(c,{ref:"toastRef"},null,512)])}],["__scopeId","data-v-61f4fbe2"]]);export{V as default};
