import{a as e,w as l}from"../../../../../@vue-runtime-dom-CmJM4nE0.js";import{s as t,a as i}from"../../../../../vue-virtual-scroller-DXqF-o5n.js";import{t as o}from"../../../../components/toast/index-BoAz49k_.js";import{r as s,g as r}from"../../../../common/util/methods-C-Gwc4Ne.js";import{g as n}from"../../../../common/util/guid-CEQsGVY5.js";import{b as a}from"../../../../common/util/typeCheck-CZoBiYEg.js";import{_ as u}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{N as c,g as d,a as m,l as v,j as f,F as p,P as h,m as b,k as g,t as x,x as y}from"../../../../../@vue-runtime-core-DQcPG1cz.js";import{k as j,n as k}from"../../../../../@vue-shared-C0QUMStP.js";import{r as S}from"../../../../../@vue-reactivity-v2zUdFSg.js";import"../../../../../vue-resize-vy9B63en.js";import"../../../../../vue-observe-visibility-D_38HsEj.js";import"../../../../../axios-CAFaAR0X.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";const N=()=>s(400,800),w=(e=30)=>{const l=[];for(let t=0;t<e;t++)l.push({height:s(300,550),width:N(),id:n(),background:r()});return l},T={name:"view-demo-virtual-scroller",components:{DynamicScroller:i,DynamicScrollerItem:t,toast:o},setup(){const e=S([]),l=S(!1),t=S(0),i=S(10),o=S(1),n=S(null),u=S(null),c=(t,i=!1)=>new Promise((o=>{if(l.value)return o();l.value=!0,setTimeout((()=>{e.value=i?w(t):e.value.concat(w(t)),l.value=!1,o()}),1e3)}));return c(10).then(),{list:e,loading:l,scrollerRef:n,toastRef:u,scrollToIndex:t,listNum:i,addListNum:o,onSetSize:(l,t)=>{e.value[t].width=N(),e.value[t].height=s(600,1e3),e.value[t].background=r()},onScrollEnd:()=>{u.value.addToast({content:"å³å°†æ»šåŠ¨åˆ°åº•éƒ¨"})},onScrollTo:()=>{if(null===t.value)return;if(!a(+t.value)||Number.isNaN(+t.value))return void alert("è¯·è¾“å…¥æ•°å­—");const l=+t.value;l>e.value.length-1||l<0?alert("è¯·è¾“å…¥æ­£ç¡®æ•°å­—èŒƒå›´"):n.value.scrollToItem(l)},onSetList:()=>{null!==i.value&&(a(+i.value)&&!Number.isNaN(+i.value)?c(+i.value,!0).then():alert("è¯·è¾“å…¥æ•°å­—"))},onAddList:()=>{null!==i.value&&(a(+i.value)&&!Number.isNaN(+i.value)?c(o.value).then((()=>{n.value.scrollToItem(e.value.length-1)})):alert("è¯·è¾“å…¥æ•°å­—"))}}}},_=e=>(x("data-v-61f4fbe2"),e=e(),y(),e),C={class:"flex flex-col relative virtual-scroller"},L={class:"flex items-center justify-center virtual-scroller-header"},I={style:{"margin-right":"10px"}},z={key:0},E={class:"flex-1 overflow-y-hidden"},D=_((()=>v("div",{style:{"margin-bottom":"20px"},class:"dynamic-scroller-slot flex items-center justify-center"}," ğŸ¥µæ’æ§½å¤´éƒ¨ğŸ¥µ ",-1))),R={class:"dynamic-scroller-item flex items-center justify-center"},A=["id"],P=["onClick"],U={style:{"margin-top":"20px"},class:"dynamic-scroller-slot flex items-center justify-center"},V=_((()=>v("div",{class:"flex items-center justify-center virtual-scroller-bottom"},"#footer",-1)));const $=u(T,[["render",function(t,i,o,s,r,n){const a=c("DynamicScrollerItem"),u=c("DynamicScroller"),x=c("toast");return m(),d("div",C,[v("div",L,[v("div",I,"å½“å‰è®°å½•æ¡æ•°: "+j(s.list.length),1),s.loading?(m(),d("button",z,"åŠ è½½ä¸­...")):(m(),d(p,{key:1},[v("button",{class:"virtual-scroller-header-btn",onClick:i[1]||(i[1]=(...e)=>s.onSetList&&s.onSetList(...e))},[h(" é‡ç½®åˆ—è¡¨ä¸º"),b(v("input",{class:"num-input",onClick:l((()=>{}),["stop"]),"onUpdate:modelValue":i[0]||(i[0]=e=>s.listNum=e)},null,512),[[e,s.listNum,void 0,{number:!0}]]),h("æ¡ ")]),v("button",{class:"virtual-scroller-header-btn",onClick:i[3]||(i[3]=(...e)=>s.onScrollTo&&s.onScrollTo(...e))},[h(" æ»šåŠ¨åˆ°ç¬¬"),b(v("input",{class:"num-input",onClick:l((()=>{}),["stop"]),"onUpdate:modelValue":i[2]||(i[2]=e=>s.scrollToIndex=e)},null,512),[[e,s.scrollToIndex,void 0,{number:!0}]]),h("æ¡ ")]),v("button",{class:"virtual-scroller-header-btn",onClick:i[5]||(i[5]=(...e)=>s.onAddList&&s.onAddList(...e))},[h(" æ·»åŠ "),b(v("input",{class:"num-input",onClick:l((()=>{}),["stop"]),"onUpdate:modelValue":i[4]||(i[4]=e=>s.addListNum=e)},null,512),[[e,s.addListNum,void 0,{number:!0}]]),h("æ¡è®°å½• ")])],64))]),v("div",E,[f(u,{ref:"scrollerRef",items:s.list,"min-item-size":500,buffer:1e3,class:"scroller",onScrollEnd:s.onScrollEnd},{before:g((()=>[D])),default:g((({item:e,index:l,active:t})=>[f(a,{item:e,active:t,"size-dependencies":[e.width,e.hegiht],"data-index":l},{default:g((()=>[v("div",R,[(m(),d("div",{id:`item-${l}`,class:"dynamic-scroller-item-content",key:e.id,style:k({width:`${e.width}px`,height:`${e.height}px`,background:e.background})},[v("div",null,"width: "+j(e.width),1),v("div",null,"hegiht: "+j(e.hegiht),1),v("div",null,"id: "+j(e.id),1),v("div",null,"background: "+j(e.background),1),v("div",null,"index: "+j(l),1),v("div",null,"active: "+j(t),1),v("button",{onClick:t=>s.onSetSize(e,l)},"é‡ç½®å½“å‰size,å˜é«˜ç‚¹",8,P)],12,A))])])),_:2},1032,["item","active","size-dependencies","data-index"])])),after:g((()=>[v("div",U," ğŸ¥µ"+j(s.loading?"loading....":"æ’æ§½åº•éƒ¨")+"ğŸ¥µ ",1)])),_:1},8,["items","onScrollEnd"])]),V,f(x,{ref:"toastRef"},null,512)])}],["__scopeId","data-v-61f4fbe2"]]);export{$ as default};
