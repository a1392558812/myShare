import{a as e,w as t}from"../../../../../@vue-runtime-dom-Dkxbnx-0.js";import{s as l,a as i}from"../../../../../vue-virtual-scroller-CSJ86Zjb.js";import{t as o}from"../../../../components/toast/index-CErESIBp.js";import{r as n,g as s}from"../../../../common/util/methods-G0pJ8i8C.js";import{g as r}from"../../../../common/util/guid-CEQsGVY5.js";import{b as a}from"../../../../common/util/typeCheck-CZoBiYEg.js";import{_ as u}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as c}from"../../../../../@vue-reactivity-mdokXGQ5.js";import{N as d,a as m,g as v,l as f,F as p,P as h,m as g,j as b,k as x,x as y,y as j}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{k,n as S}from"../../../../../@vue-shared-LkD7rn4X.js";import"../../../../../vue-resize-CcdRwCfs.js";import"../../../../../vue-observe-visibility-CpG4rDos.js";import"../../../../../axios-DPD4D5Qz.js";import"../../../../../__commonjsHelpers__-MdiGH4nz.js";const N=()=>n(400,800),w=(e=30)=>{const t=[];for(let l=0;l<e;l++)t.push({height:n(300,550),width:N(),id:r(),background:s()});return t},C={name:"view-demo-virtual-scroller",components:{DynamicScroller:l,DynamicScrollerItem:i,toast:o},setup(){const e=c([]),t=c(!1),l=c(0),i=c(10),o=c(1),r=c(null),u=c(null),d=(l,i=!1)=>new Promise((o=>{if(t.value)return o();t.value=!0,setTimeout((()=>{e.value=i?w(l):e.value.concat(w(l)),t.value=!1,o()}),1e3)}));return d(10).then(),{list:e,loading:t,scrollerRef:r,toastRef:u,scrollToIndex:l,listNum:i,addListNum:o,onSetSize:(t,l)=>{e.value[l].width=N(),e.value[l].height=n(600,1e3),e.value[l].background=s()},onScrollEnd:()=>{u.value.addToast({content:"即将滚动到底部"})},onScrollTo:()=>{if(null===l.value)return;if(!a(+l.value)||Number.isNaN(+l.value))return void alert("请输入数字");const t=+l.value;t>e.value.length-1||t<0?alert("请输入正确数字范围"):r.value.scrollToItem(t)},onSetList:()=>{null!==i.value&&(a(+i.value)&&!Number.isNaN(+i.value)?d(+i.value,!0).then():alert("请输入数字"))},onAddList:()=>{null!==i.value&&(a(+i.value)&&!Number.isNaN(+i.value)?d(o.value).then((()=>{r.value.scrollToItem(e.value.length-1)})):alert("请输入数字"))}}}},T=e=>(y("data-v-6221c7f3"),e=e(),j(),e),_={class:"flex flex-direction-column relative virtual-scroller"},L={class:"flex align-items-center justify-content-center virtual-scroller-header"},I={style:{"margin-right":"10px"}},z={key:0},D={class:"flex-1 overflow-y-hidden"},R=T((()=>f("div",{style:{"margin-bottom":"20px"},class:"dynamic-scroller-slot flex align-items-center justify-content-center"}," 🥵插槽头部🥵 ",-1))),E={class:"dynamic-scroller-item flex align-items-center justify-content-center"},A=["id"],U=["onClick"],V={style:{"margin-top":"20px"},class:"dynamic-scroller-slot flex align-items-center justify-content-center"},$=T((()=>f("div",{class:"flex align-items-center justify-content-center virtual-scroller-bottom"}," #footer ",-1)));const H=u(C,[["render",function(l,i,o,n,s,r){const a=d("DynamicScrollerItem"),u=d("DynamicScroller"),c=d("toast");return m(),v("div",_,[f("div",L,[f("div",I,"当前记录条数: "+k(n.list.length),1),n.loading?(m(),v("button",z,"加载中...")):(m(),v(p,{key:1},[f("button",{class:"virtual-scroller-header-btn",onClick:i[1]||(i[1]=(...e)=>n.onSetList&&n.onSetList(...e))},[h(" 重置列表为"),g(f("input",{class:"num-input",onClick:t((()=>{}),["stop"]),"onUpdate:modelValue":i[0]||(i[0]=e=>n.listNum=e)},null,512),[[e,n.listNum,void 0,{number:!0}]]),h("条 ")]),f("button",{class:"virtual-scroller-header-btn",onClick:i[3]||(i[3]=(...e)=>n.onScrollTo&&n.onScrollTo(...e))},[h(" 滚动到第"),g(f("input",{class:"num-input",onClick:t((()=>{}),["stop"]),"onUpdate:modelValue":i[2]||(i[2]=e=>n.scrollToIndex=e)},null,512),[[e,n.scrollToIndex,void 0,{number:!0}]]),h("条 ")]),f("button",{class:"virtual-scroller-header-btn",onClick:i[5]||(i[5]=(...e)=>n.onAddList&&n.onAddList(...e))},[h(" 添加"),g(f("input",{class:"num-input",onClick:t((()=>{}),["stop"]),"onUpdate:modelValue":i[4]||(i[4]=e=>n.addListNum=e)},null,512),[[e,n.addListNum,void 0,{number:!0}]]),h("条记录 ")])],64))]),f("div",D,[b(u,{ref:"scrollerRef",items:n.list,"min-item-size":500,buffer:1e3,class:"scroller",onScrollEnd:n.onScrollEnd},{before:x((()=>[R])),default:x((({item:e,index:t,active:l})=>[b(a,{item:e,active:l,"size-dependencies":[e.width,e.hegiht],"data-index":t},{default:x((()=>[f("div",E,[(m(),v("div",{id:`item-${t}`,class:"dynamic-scroller-item-content",key:e.id,style:S({width:`${e.width}px`,height:`${e.height}px`,background:e.background})},[f("div",null,"width: "+k(e.width),1),f("div",null,"hegiht: "+k(e.hegiht),1),f("div",null,"id: "+k(e.id),1),f("div",null,"background: "+k(e.background),1),f("div",null,"index: "+k(t),1),f("div",null,"active: "+k(l),1),f("button",{onClick:l=>n.onSetSize(e,t)},"重置当前size,变高点",8,U)],12,A))])])),_:2},1032,["item","active","size-dependencies","data-index"])])),after:x((()=>[f("div",V," 🥵"+k(n.loading?"loading....":"插槽底部")+"🥵 ",1)])),_:1},8,["items","onScrollEnd"])]),$,b(c,{ref:"toastRef"},null,512)])}],["__scopeId","data-v-6221c7f3"]]);export{H as default};
