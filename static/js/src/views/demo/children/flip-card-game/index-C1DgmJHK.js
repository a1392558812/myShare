import{r as e}from"../../../../../@vue-reactivity-Bg8cIJPh.js";import{b as a,o as l,a as s,g as o,l as t,F as r,q as u,s as i}from"../../../../../@vue-runtime-core-C-ht4TMg.js";import{k as n,n as v}from"../../../../../@vue-shared-LkD7rn4X.js";const p={class:"flex flex-col items-center gap-[20px] p-[20px]"},d=["onClick"],c={class:"absolute w-full h-full [backface-visibility:hidden] flex justify-center items-center text-[24px] font-bold rounded-[8px] [box-shadow:0_4px_8px_rgba(0,_0,_0,_0.1)] bg-[#fff] border-[2px] border-solid border-[#2196f3] [transform:rotateY(180deg)]"},f=t("div",{class:"absolute w-full h-full [backface-visibility:hidden] flex justify-center items-center text-[24px] font-bold rounded-[8px] [box-shadow:0_4px_8px_rgba(0,_0,_0,_0.1)] bg-[#2196f3] border-[2px] border-solid border-[#fff]"},null,-1),x={key:0,class:"mt-[20px]"},b={__name:"index",setup(b){const m=e(0),h=e([]),g=e([]),_=e(!1),w=e(!1),y=a((()=>({gridTemplateColumns:`repeat(${k.value.cols}, 100px)`,gridTemplateRows:`repeat(${k.value.rows}, 140px)`}))),k=e({rows:1,cols:2});function F(){const e=k.value.rows*k.value.cols,a=Array.from({length:e/2},((e,a)=>a+1)),l=[...a,...a].map((e=>({value:e,sort:Math.random()}))).sort(((e,a)=>e.sort-a.sort)).map((({value:e})=>({value:e,isFlipped:!1,isMatched:!1})));h.value=l}function M(e){_.value||h.value[e].isMatched||h.value[e].isFlipped||(h.value[e].isFlipped=!0,g.value.push(e),2===g.value.length&&function(){_.value=!0;const[e,a]=g.value;setTimeout((()=>{h.value[e].value===h.value[a].value?(h.value[e].isMatched=!0,h.value[a].isMatched=!0,w.value=h.value.every((e=>e.isMatched)),j()):(h.value[e].isFlipped=!1,h.value[a].isFlipped=!1,j())}),1e3)}())}function j(){g.value=[],_.value=!1}const C=()=>{k.value.rows>k.value.cols?k.value.cols=k.value.cols+1:k.value.rows=k.value.rows+1,k.value.rows*k.value.cols%2>0&&C()};function T(){m.value++,C(),w.value=!1,F()}return l(F),(e,a)=>(s(),o("div",p,[t("h2",null,"第 "+n(m.value)+" 关",1),t("div",{class:"grid gap-[10px]",style:v(y.value)},[(s(!0),o(r,null,u(h.value,((e,a)=>(s(),o("div",{key:a,class:"relative cursor-pointer [transform-style:preserve-3d] [transition:transform_0.6s]",style:v({...e.isFlipped?{transform:"rotateY(180deg)"}:{},...e.isMatched?{opacity:"0.4",cursor:"not-allowed"}:{},...e.isProcessing?{pointerEvents:"none"}:{}}),onClick:e=>M(a)},[t("div",c,n(e.value),1),f],12,d)))),128))],4),w.value?(s(),o("div",x,[t("button",{class:"px-[20px] py-[10px] text-[16px] bg-[#4caf50] text-[white] border-none rounded-[5px] cursor-pointer [transition:background_0.3s] hover:bg-[#45a049]",onClick:T}," 进入第 "+n(m.value+1)+" 关 ",1)])):i("",!0)]))}};export{b as default};
