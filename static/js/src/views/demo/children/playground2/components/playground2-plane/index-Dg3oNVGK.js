import{a as e}from"../../../../../../../@vue-runtime-dom-ByoLcAZV.js";import{_ as t}from"../../../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as a}from"../../../../../../../@vue-reactivity-mdokXGQ5.js";import{b as r,e as l,n as o,t as s,a as p,g as n,l as i,s as u,m as d,x as m,y as c}from"../../../../../../../@vue-runtime-core-lkGMyH8G.js";import{l as x,k as g,n as b}from"../../../../../../../@vue-shared-LkD7rn4X.js";const f=e=>(m("data-v-e3fa41fc"),e=e(),c(),e),y={class:"w-full h-full flex flex-col"},v={class:"toggle-btn-wrap shrink-0 flex items-center p-2 gap-2"},w={key:0,class:"toggle-btn flex items-center gap-2"},h={class:"text-sm text-gray-600"},V=["value"],j={class:"iframe-wrap flex flex-1 w-full"},U={class:"textarea-warp w-full"},k=f((()=>i("div",{class:"textarea-title bg-gray-100 px-4 py-2 font-medium text-gray-700 border-b border-gray-200"}," template ",-1))),A={class:"textarea-warp w-full"},O=f((()=>i("div",{class:"textarea-title bg-gray-100 px-4 py-2 font-medium text-gray-700 border-b border-gray-200"}," script ",-1))),R={class:"textarea-warp w-full"},S=f((()=>i("div",{class:"textarea-title bg-gray-100 px-4 py-2 font-medium text-gray-700 border-b border-gray-200"}," css ",-1))),L={class:"textarea-warp w-full"},M=f((()=>i("div",{class:"textarea-title bg-gray-100 px-4 py-2 font-medium text-gray-700 border-b border-gray-200"}," imports ",-1))),_=t(Object.assign({name:"view-demo-playground2-plane"},{__name:"index",props:{mode:{type:String,default:"edit"},templateValue:{type:String,default:"<div></div>"},cssValue:{type:String,default:""},scriptValue:{type:String,default:"export default { setup() {} }"},imports:{type:Object,default:()=>({vue:"https://unpkg.com/vue@3/dist/vue.esm-browser.js"})},beforeAppMount:{type:String,default:';console.log("🐮 --- beforeAppMount");'},afterAppMount:{type:String,default:';console.log("🐮 --- afterAppMount", app);'}},emits:["update:templateValue","update:scriptValue","update:cssValue","update:imports"],setup(t,{emit:m}){const c=t,f=m,_=a(""),$=a(null),z=a(50);let J="",N="";const B=r({get:()=>c.templateValue,set(e){f("update:templateValue",e)}}),C=r({get:()=>c.scriptValue,set(e){f("update:scriptValue",e)}}),F=r({get:()=>c.cssValue,set(e){f("update:cssValue",e)}}),I=r({get:()=>JSON.stringify(c.imports),set(e){f("update:imports",JSON.parse(e))}}),T=e=>{const t=+e.target.value;z.value=t?t>100?100:t<0?0:t:0},q=()=>{URL.revokeObjectURL(J),URL.revokeObjectURL(N),J="",N=""};return l((()=>[c.templateValue,c.scriptValue,c.cssValue,c.imports,c.beforeAppMount,c.afterAppMount]),((e,t)=>{o().then((()=>{q(),J=URL.createObjectURL(new Blob([c.scriptValue],{type:"text/javascript;charset=UTF-8"})),N=URL.createObjectURL(new Blob(["<style>\nhtml, body{ padding: 0; margin: 0 }"+(c.cssValue?"\n"+c.cssValue:"")+'</style>\n<script type="importmap">\n  {\n    "imports": '+JSON.stringify(c.imports)+`\n  }\n<\/script>\n\n<div id="app"></div>\n\n<script type="module">\n  import { createApp } from 'vue'\n  import option from '${J}'\n\n  ;${c.beforeAppMount};\n\n  ;const app = createApp({\n    template: '${c.templateValue.replace(/\n/g,"")}',\n    ...option\n  })\n\n  ;${c.afterAppMount};\n\n  ;app.mount('#app')\n<\/script>`],{type:"text/html;charset=UTF-8"})),$.value.src=N}))}),{immediate:!0}),l((()=>c.mode),((e,t)=>{e!==t&&(_.value=e)}),{immediate:!0}),s((()=>{q()})),(t,a)=>(p(),n("div",y,[i("div",v,[i("button",{class:x(["toggle-btn px-4 py-2 text-sm font-medium rounded-md transition-all duration-300 flex items-center justify-center","preview"===_.value?"bg-purple-600 text-white shadow-md":"bg-white text-gray-700 border-[1px] border-solid border-gray-300 hover:bg-gray-50"]),onClick:a[0]||(a[0]=e=>_.value="preview")}," 预览模式 ",2),i("button",{class:x(["toggle-btn px-4 py-2 text-sm font-medium rounded-md transition-all duration-300 flex items-center justify-center","edit"===_.value?"bg-purple-600 text-white shadow-md":"bg-white text-gray-700 border-[1px] border-solid border-gray-300 hover:bg-gray-50"]),onClick:a[1]||(a[1]=e=>_.value="edit")}," 编辑模式 ",2),"edit"===_.value?(p(),n("div",w,[i("label",h,"编辑器宽度: "+g(z.value)+"%",1),i("input",{class:"w-12 h-8 px-2 border-[1px] border-solid border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all",type:"number",value:z.value,onInput:T},null,40,V)])):u("",!0)]),i("div",j,["edit"===_.value?(p(),n("div",{key:0,class:"content-wrap flex flex-col mr-4 rounded-lg overflow-hidden border-[1px] border-solid border-gray-200 shadow-sm",style:b({width:`${z.value}%`})},[i("div",U,[k,d(i("textarea",{class:"textarea-item w-[calc(100%-20px*2)] h-[119px] py-3 px-[20px] bg-white border-b border-gray-200 focus:outline-none resize-none font-mono text-sm","onUpdate:modelValue":a[2]||(a[2]=e=>B.value=e)},null,512),[[e,B.value]])]),i("div",A,[O,d(i("textarea",{class:"textarea-item w-[calc(100%-20px*2)] h-[119px] py-3 px-[20px] bg-white border-b border-gray-200 focus:outline-none resize-none font-mono text-sm","onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e)},null,512),[[e,C.value]])]),i("div",R,[S,d(i("textarea",{class:"textarea-item w-[calc(100%-20px*2)] h-[119px] py-3 px-[20px] bg-white border-b border-gray-200 focus:outline-none resize-none font-mono text-sm","onUpdate:modelValue":a[4]||(a[4]=e=>F.value=e)},null,512),[[e,F.value]])]),i("div",L,[M,d(i("textarea",{class:"textarea-item w-[calc(100%-20px*2)] h-[119px] py-3 px-[20px] border-none bg-white focus:outline-none resize-none font-mono text-sm","onUpdate:modelValue":a[5]||(a[5]=e=>I.value=e)},null,512),[[e,I.value]])])],4)):u("",!0),i("iframe",{style:{flex:1},class:"iframe-item rounded-lg border-[1px] border-solid border-gray-200 shadow-sm bg-white",ref_key:"iframeRef",ref:$},null,512)])]))}}),[["__scopeId","data-v-e3fa41fc"]]);export{_ as c};
