import{k as e}from"../../../../../@vueuse-C17lgTZK.js";import{_ as o}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as a,u as t}from"../../../../../@vue-reactivity-UKyDGrvc.js";import{w as r,f as s,a as d,g as l,l as i,x as n,y as u}from"../../../../../@vue-runtime-core-hXVbjtl0.js";import{l as v,k as c}from"../../../../../@vue-shared-LkD7rn4X.js";const m=e=>(n("data-v-38303a05"),e=e(),u(),e),p={class:"min-h-screen bg-gradient-to-br from-indigo-50 to-purple-50 p-8"},g={class:"max-w-7xl mx-auto"},x={key:0,class:"flex items-center justify-center h-96 bg-white rounded-xl shadow-lg"},b=[m((()=>i("div",{class:"text-gray-500 text-lg"},"您的浏览器不支持屏幕录制功能",-1)))],f={key:1,class:"flex flex-wrap gap-6 justify-center"},h={class:"bg-white rounded-xl shadow-lg overflow-hidden transform hover:shadow-xl transition-shadow duration-300"},w={class:"video-label flex items-center justify-between px-4 h-[64px] bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200"},y=m((()=>i("span",{class:"font-medium text-indigo-800"},"录制预览",-1))),j={class:"bg-white rounded-xl shadow-lg overflow-hidden transform hover:shadow-xl transition-shadow duration-300"},k={class:"video-label flex items-center px-4 h-[64px] bg-gradient-to-r from-indigo-100 to-purple-100 border-b border-indigo-200"},_=m((()=>i("span",{class:"font-medium text-indigo-800 mr-2"},"录制完成：",-1))),R=["href"],L={key:1,class:"text-gray-500 text-sm"},O=["src"],U=o(Object.assign({name:"view-demo-screen-record"},{__name:"index",setup(o){const{isSupported:n,enabled:u,stream:m,start:U,stop:z}=e(),B=a(null),C=a(null);let I;const M=()=>{C.value&&(URL.revokeObjectURL(C.value),C.value=null)};return r((()=>{B.value&&(B.value.srcObject=m.value)})),s((()=>{I&&I.stop(),z(),M(),I=null})),(e,o)=>(d(),l("div",p,[i("div",g,[t(n)?(d(),l("div",f,[i("div",h,[i("div",w,[y,i("button",{onClick:o[0]||(o[0]=e=>t(u)?(I.stop(),I.ondataavailable=e=>{e.data.size>0&&(C.value=URL.createObjectURL(new Blob([e.data],{type:"video/mp4"})),I=null)},void z()):(M(),void U().then((()=>{I=new MediaRecorder(m.value,{mimeType:"video/webm"}),I.start()})))),class:v(["px-4 py-2 rounded-full font-medium transition-colors",t(u)?"bg-red-500 hover:bg-red-600 text-white":"bg-indigo-500 hover:bg-indigo-600 text-white"])},c(t(u)?"结束录制":"开始录制"),3)]),i("video",{class:"block w-[500px] h-auto border-2 border-indigo-100 rounded-lg m-4",ref_key:"videoRef",ref:B,muted:"",download:"",autoplay:"",controls:""},null,512)]),i("div",j,[i("div",k,[_,C.value?(d(),l("a",{key:0,href:C.value,download:"",class:"text-indigo-600 hover:text-indigo-800 hover:underline text-sm break-all max-w-[400px]"},c(C.value),9,R)):(d(),l("span",L,"暂无录制内容"))]),i("video",{class:"block w-[500px] h-auto border-2 border-indigo-100 rounded-lg m-4",src:C.value,muted:"",download:"",autoplay:!1,preload:"auto",controls:""},null,8,O)])])):(d(),l("div",x,b))])]))}}),[["__scopeId","data-v-38303a05"]]);export{U as default};
