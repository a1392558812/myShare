import{j as e}from"../../../../../@vueuse-CzS49P4w.js";import{_ as a}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as l,u as s}from"../../../../../@vue-reactivity-mdokXGQ5.js";import{w as t,f as o,a as r,g as i,l as d,P as n,x as v,y as u}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{k as c}from"../../../../../@vue-shared-LkD7rn4X.js";const p={key:0,style:{width:"600px",height:"600px"},class:"flex align-items-center justify-content-center"},m={key:1},y={class:"flex"},f={class:"video-player-wrap"},b={class:"video-label flex align-items-center"},j=(e=>(v("data-v-a916e224"),e=e(),u(),e))((()=>d("span",{style:{"margin-right":"10px"}},"录制预览",-1))),w={class:"video-player-wrap"},x={class:"video-label flex align-items-center"},g=["href"],h=["src"],k=a(Object.assign({name:"view-demo-screen-record"},{__name:"index",setup(a){const{isSupported:v,enabled:u,stream:k,start:_,stop:R}=e(),L=l(null),O=l(null);let U;const z=()=>{O.value&&(URL.revokeObjectURL(O.value),O.value=null)};return t((()=>{L.value&&(L.value.srcObject=k.value)})),o((()=>{U.stop(),R(),z(),U=null})),(e,a)=>(r(),i("div",null,[s(v)?(r(),i("div",m,[d("div",y,[d("div",f,[d("div",b,[j,d("button",{onClick:a[0]||(a[0]=e=>s(u)?(U.stop(),U.ondataavailable=e=>{e.data.size>0&&(O.value=URL.createObjectURL(new Blob([e.data],{type:"video/mp4"})),U=null)},void R()):(z(),void _().then((()=>{U=new MediaRecorder(k.value,{mimeType:"video/webm"}),U.start()}))))},c(s(u)?"结束录制":"开始录制"),1)]),d("video",{class:"display-block video-player",ref_key:"videoRef",ref:L,muted:"",download:"",autoplay:"",controls:""},null,512)]),d("div",w,[d("div",x,[d("span",null,[n("预览："),d("a",{href:O.value,download:""},c(O.value),9,g)])]),d("video",{class:"display-block video-player",src:O.value,muted:"",download:"",autoplay:!1,preload:"auto",controls:""},null,8,h)])])])):(r(),i("div",p," 浏览器不支持 "))]))}}),[["__scopeId","data-v-a916e224"]]);export{k as default};
