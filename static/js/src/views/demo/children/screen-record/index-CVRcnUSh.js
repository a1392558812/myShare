import{j as e}from"../../../../../@vueuse-CzS49P4w.js";import{_ as a}from"../../../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as l,u as s}from"../../../../../@vue-reactivity-mdokXGQ5.js";import{w as t,f as o,a as r,g as d,l as i,P as v,x as n,y as u}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{k as c}from"../../../../../@vue-shared-LkD7rn4X.js";const p={key:0,style:{width:"600px",height:"600px"},class:"flex items-center justify-center"},m={key:1},f={class:"flex"},y={class:"video-player-wrap"},b={class:"video-label flex items-center"},j=(e=>(n("data-v-c6d0c989"),e=e(),u(),e))((()=>i("span",{style:{"margin-right":"10px"}},"录制预览",-1))),w={class:"video-player-wrap"},x={class:"video-label flex items-center"},h=["href"],k=["src"],R=a(Object.assign({name:"view-demo-screen-record"},{__name:"index",setup(a){const{isSupported:n,enabled:u,stream:R,start:_,stop:g}=e(),L=l(null),O=l(null);let U;const z=()=>{O.value&&(URL.revokeObjectURL(O.value),O.value=null)};return t((()=>{L.value&&(L.value.srcObject=R.value)})),o((()=>{U.stop(),g(),z(),U=null})),(e,a)=>(r(),d("div",null,[s(n)?(r(),d("div",m,[i("div",f,[i("div",y,[i("div",b,[j,i("button",{onClick:a[0]||(a[0]=e=>s(u)?(U.stop(),U.ondataavailable=e=>{e.data.size>0&&(O.value=URL.createObjectURL(new Blob([e.data],{type:"video/mp4"})),U=null)},void g()):(z(),void _().then((()=>{U=new MediaRecorder(R.value,{mimeType:"video/webm"}),U.start()}))))},c(s(u)?"结束录制":"开始录制"),1)]),i("video",{class:"block video-player",ref_key:"videoRef",ref:L,muted:"",download:"",autoplay:"",controls:""},null,512)]),i("div",w,[i("div",x,[i("span",null,[v("预览："),i("a",{href:O.value,download:""},c(O.value),9,h)])]),i("video",{class:"block video-player",src:O.value,muted:"",download:"",autoplay:!1,preload:"auto",controls:""},null,8,k)])])])):(r(),d("div",p," 浏览器不支持 "))]))}}),[["__scopeId","data-v-c6d0c989"]]);export{R as default};
