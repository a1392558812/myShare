import{r as e,a as r}from"../../../../../@vue-reactivity-v2zUdFSg.js";import{o as a,y as n,b as o,g as t,a as s,l,F as c,q as u}from"../../../../../@vue-runtime-core-DQcPG1cz.js";import{n as i,k as p}from"../../../../../@vue-shared-C0QUMStP.js";const f={class:"inline-block p-[12px] bg-[#222] text-[#fff] rounded-[8px]"},x=l("h2",null,"俄罗斯方块游戏",-1),d={class:"flex flex-col bg-[#333] border-[2px] border-solid border-[#444] mb-[10px]"},h={class:"mt-[8px]"},v={__name:"index",setup(v){const y=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[0,1,1],[1,1,0]],[[1,1,0],[0,1,1]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]]];const b=e([]),m=e(0),g=r({shape:[],x:0,y:0});let w;function k(){g.shape=function(){const e=y[Math.floor(Math.random()*y.length)];return JSON.parse(JSON.stringify(e))}(),g.x=Math.floor((10-g.shape[0].length)/2),g.y=0}function A(e,r,a){for(let n=0;n<e.length;n++)for(let o=0;o<e[n].length;o++)if(e[n][o]&&(a+n>=20||r+o<0||r+o>=10||b.value[a+n][r+o]))return!0;return!1}function E(){A(g.shape,g.x,g.y+1)?(g.shape.forEach(((e,r)=>{e.forEach(((e,a)=>{e&&g.y+r>=0&&(b.value[g.y+r][g.x+a]=e)}))})),function(){let e=0;for(let r=19;r>=0;r--)b.value[r].every((e=>e))&&(b.value.splice(r,1),b.value.unshift(Array(10).fill(0)),e++,r++);m.value+=100*e}(),k(),A(g.shape,g.x,g.y)&&(clearInterval(w),alert("游戏结束！"))):g.y++}function I(){m.value=0,b.value=Array.from({length:20},(()=>Array(10).fill(0))),k(),clearInterval(w),w=setInterval(E,500)}function j(e){switch(e.code){case"ArrowLeft":A(g.shape,g.x-1,g.y)||g.x--;break;case"ArrowRight":A(g.shape,g.x+1,g.y)||g.x++;break;case"ArrowDown":A(g.shape,g.x,g.y+1)||g.y++;break;case"ArrowUp":!function(){const e=(r=g.shape)[0].map(((e,a)=>r.map((e=>e[a])))).reverse();var r;A(e,g.x,g.y)||(g.shape=e)}()}}a((()=>{I(),window.addEventListener("keydown",j)})),n((()=>{clearInterval(w),window.removeEventListener("keydown",j)}));const L=o((function(){const e=b.value.map((e=>[...e]));return g.shape.forEach(((r,a)=>{r.forEach(((r,n)=>{r&&g.y+a>=0&&g.y+a<20&&g.x+n>=0&&g.x+n<10&&(e[g.y+a][g.x+n]=r)}))})),e}));return(e,r)=>(s(),t("div",f,[x,l("div",d,[(s(!0),t(c,null,u(L.value,((e,r)=>(s(),t("div",{key:r,class:"flex"},[(s(!0),t(c,null,u(e,((e,r)=>(s(),t("div",{key:r,class:"w-[24px] h-[24px] border-[1px] border-solid border-[#555] bg-[#222]",style:i(e?{background:"#1abc9c"}:{})},null,4)))),128))])))),128))]),l("div",h,[l("p",null,"得分: "+p(m.value),1),l("button",{class:"mt-[6px] px-[12px] py-[4px] border-none bg-[#1abc9c] text-[#fff] rounded-[4px] cursor-pointer",onClick:I},"重新开始")])]))}};export{v as default};
