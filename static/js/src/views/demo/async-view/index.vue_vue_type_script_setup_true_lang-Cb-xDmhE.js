const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../../css/src/components/loading/loading-Cn048VR9.css"])))=>i.map(i=>d[i]);
import{_ as t}from"../../../../vite/preload-helper-Cu0sd_0_.js";import{V as e}from"../../../../vue-D5WwiSYs.js";import{i as o}from"../../../../vue3-sfc-loader-BOu48WDF.js";import{a as s}from"../../../common/axios/index-B2NMWJBe.js";import{u as r}from"../../../../vue-router-DhXt6nTE.js";import{l as n}from"../../../components/loading/loading-DJY11uwa.js";import{c as a}from"../../../../sass-CEJ-dx0B.js";import{a as i,r as l,u as p}from"../../../../@vue-reactivity-v2zUdFSg.js";import{g as c,a as m,c as d,R as f,O as u,j as h}from"../../../../@vue-runtime-core-DQcPG1cz.js";const g=Object.assign({name:"async-view"},{__name:"index",setup(g){let x=r().path.split("/demo")[1];x=x.split("/")[1];const v=i({title:"",errorMessage:""}),j=l([]),w=t=>{if(!t.path)throw new Error("path不能为空");let e=j.value.find((e=>e.path===t.path));return e?e.content||(t.content&&(e.content=t.content),t.suffix&&(e.suffix=t.suffix)):(e={path:t.path,suffix:t.suffix,content:t.content||"",promise:s.get(t.path)},j.value.push(e)),e},y=f({loader:()=>o(`./async-demo/${x}/index.vue`,{moduleCache:{vue:e},getFile(t){const e=t.split(".").pop();return new Promise(((o,s)=>{w({path:t,suffix:e,content:""}).promise.then((r=>{if(r.data)return"js"===e?(w({path:t,content:r.data}),o({getContentData:t=>r.data,type:".mjs"})):(w({path:t,suffix:"html",content:r.data}),o(r.data));s(`获取文件失败: ${t}--${r}`)}))}))},async processStyles(t,e,o,s){if(!e)return t;if("scss"!==e)throw new Error(`不支持该语言${e}处理器`);let r=t;const n=/@use\s+(?:url\s*\(\s*["']([^"']+)['"]\s*\)|["']([^"']+)["'])/gi,i=r.match(n);if(i&&i.length){let t=i[0].split("@use")[1].trim().replace(/["']/g,"");if(t){const e=w({path:t,suffix:"scss",content:""}),o=await e.promise;if(!o.data)throw new Error(`获取${t}失败`);w({path:t,content:o.data}),r=r.replace(n,o.data)}}const l=a(r,{style:"expanded"});if(l.css)return l.css;throw new Error("scss compile error")},addStyle(t){const e=Object.assign(document.createElement("style"),{textContent:t}),o=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(e,o)},log(t,...e){}}).catch((t=>{throw v.title="编译失败",v.errorMessage=t instanceof Error?t.toString():String(t),t})),errorComponent:()=>h("div",{style:"background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 30px; color: red; word-break: break-all; padding: 0 60px;"},[h("div",null,[v.title]),h("div",null,[v.errorMessage])]),loadingComponent:()=>h(n,{showModal:!0,style:"position: fixed"},null)}),E=()=>f((()=>t((()=>import("../../../components/v-md-preview/index-Bh0tmboy.js")),__vite__mapDeps([0]),import.meta.url)));return(t,e)=>(m(),c("div",null,[(m(),d(u(p(y)),{fileList:p(j),markdownComponent:E},null,8,["fileList"]))]))}});export{g as _};
