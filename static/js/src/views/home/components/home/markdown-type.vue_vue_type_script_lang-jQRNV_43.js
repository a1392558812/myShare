const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../../../css/src/components/loading/loading-Cn048VR9.css"])))=>i.map(i=>d[i]);
import{_ as t}from"../../../../../vite/preload-helper-Cu0sd_0_.js";import{$ as e}from"../../../../../jquery-IViRahhZ.js";import{n as i}from"./navigator-title-CwHuEn5D.js";import{l}from"../../../../components/loading/loading-DJiactHW.js";import{R as r,e as n,o as a,j as o,N as s,P as d,n as h}from"../../../../../@vue-runtime-core-C-ht4TMg.js";import{r as m}from"../../../../../@vue-reactivity-Bg8cIJPh.js";const c={name:"home-markdown-type",components:{navigatorTitle:i,loadingComponent:l,vMdPreview:r((()=>t((()=>import("../../../../components/v-md-preview/index-CM0VYjjD.js")),__vite__mapDeps([0]),import.meta.url)))},props:{headerH:{type:String,default:"70px"},loading:{type:Boolean,default:!0},ifLarger:{type:Boolean,default:!0},htmlMD:{type:String,default:""},markdownTitleWidth:{type:String,default:""},title:{type:String,default:""}},setup(t){const i=m(null),l=m([]),r=m("550px"),o=m("calc(100% - 170px)"),s=m(""),d=()=>{if(i.value){const t=i.value.$el.querySelectorAll("h1,h2,h3,h4,h5,h6"),e=Array.from(t).filter((t=>!!t.innerText.trim()));if(!e.length)return void(l.value=[]);const r=Array.from(new Set(e.map((t=>t.tagName)))).sort();l.value=e.map((t=>({title:t.innerText,lineIndex:t.getAttribute("data-v-md-line"),indent:r.indexOf(t.tagName)})))}else setTimeout((()=>{d()}))},c=()=>{o.value=`calc(100% - ${100+e(".home .title").outerHeight()}px)`};return n((()=>t.htmlMD),((t,e)=>{t!==e&&t&&(s.value=t,h().then((()=>{d()})))}),{immediate:!0}),n((()=>t.title),(()=>{c()})),a(c),{preview:i,htmlMarkStr:s,articleTitles:l,markdownMinHeight:o,markdownContentMinWidth:r,handleAnchorClick:t=>{const{lineIndex:l}=t;let r=i.value.$el.querySelector(`[data-v-md-line="${l}"]`);r&&i.value.scrollToTarget({target:r,scrollContainer:e(".markdown-content")[0]}),r=null}}},render(){return o("div",{class:"w-[100%] h-[100%] relative overflow-hidden flex flex-col"},[o("div",{style:(()=>this.ifLarger?this.articleTitles.length?{minWidth:`calc(${this.markdownContentMinWidth} + ${this.markdownTitleWidth})`}:{minWidth:this.markdownContentMinWidth}:{})(),class:"w-[100%] bg-style flex shrink-0 items-center justify-center title"},[this.title]),this.loading?o(l,{style:"background-color: transparent",showModal:!0},{default:()=>[o("div",{style:"font-weight: bold",class:"w-[100%] h-[100%] flex items-center justify-center"},[d("加载中...")])]}):o("div",{class:"w-[100%] h-[100%] relative flex overflow-auto markdown-content"},[o("div",{class:"w-[100%] h-0",style:this.ifLarger?{minWidth:this.markdownContentMinWidth}:{}},[o("div",{style:"padding-bottom: 100px"},[o(s("v-md-preview"),{class:"w-[100%]",ifLarger:this.ifLarger,onGetVMdPreviewRef:t=>{this.preview=t},text:this.htmlMarkStr},null)])]),this.ifLarger&&this.articleTitles.length?o(s("navigator-title"),{markdownTitleWidth:this.markdownTitleWidth,articleTitles:this.articleTitles,onHandleAnchorClick:t=>{this.handleAnchorClick(t)}},null):null])])}};export{c as _};
