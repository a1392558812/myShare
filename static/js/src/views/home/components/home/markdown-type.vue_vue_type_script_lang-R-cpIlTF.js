const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../../../css/src/components/loading/loading-B7zpn3iV.css"])))=>i.map(i=>d[i]);
import{_ as t}from"../../../../../vite/preload-helper-Cu0sd_0_.js";import{$ as e}from"../../../../../jquery-IViRahhZ.js";import{n as i}from"./navigator-title-IQm0J74D.js";import{l as n}from"../../../../components/loading/loading-BBwpVUlN.js";import{R as l,e as r,o as a,j as o,N as s,P as d,n as h}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{r as m}from"../../../../../@vue-reactivity-mdokXGQ5.js";const c={name:"home-markdown-type",components:{navigatorTitle:i,loadingComponent:n,vMdPreview:l((()=>t((()=>import("../../../../components/v-md-preview/index-_wQn6WdH.js")),__vite__mapDeps([0]),import.meta.url)))},props:{headerH:{type:String,default:"70px"},loading:{type:Boolean,default:!0},ifLarger:{type:Boolean,default:!0},htmlMD:{type:String,default:""},markdownTitleWidth:{type:String,default:""},title:{type:String,default:""}},setup(t){const i=m(null),n=m([]),l=m("550px"),o=m("calc(100% - 170px)"),s=m(""),d=()=>{if(i.value){const t=i.value.$el.querySelectorAll("h1,h2,h3,h4,h5,h6"),e=Array.from(t).filter((t=>!!t.innerText.trim()));if(!e.length)return void(n.value=[]);const l=Array.from(new Set(e.map((t=>t.tagName)))).sort();n.value=e.map((t=>({title:t.innerText,lineIndex:t.getAttribute("data-v-md-line"),indent:l.indexOf(t.tagName)})))}else setTimeout((()=>{d()}))},c=()=>{o.value=`calc(100% - ${100+e(".home .title").outerHeight()}px)`};return r((()=>t.htmlMD),((t,e)=>{t!==e&&t&&(s.value=t,h().then((()=>{d()})))}),{immediate:!0}),r((()=>t.title),(()=>{c()})),a(c),{preview:i,htmlMarkStr:s,articleTitles:n,markdownMinHeight:o,markdownContentMinWidth:l,handleAnchorClick:t=>{const{lineIndex:n}=t;let l=i.value.$el.querySelector(`[data-v-md-line="${n}"]`);l&&i.value.scrollToTarget({target:l,scrollContainer:e(".markdown-content")[0]}),l=null}}},render(){return o("div",{class:"width100 height100 relative overflow-hidden flex flex-direction-column"},[o("div",{style:(()=>this.ifLarger?this.articleTitles.length?{minWidth:`calc(${this.markdownContentMinWidth} + ${this.markdownTitleWidth})`}:{minWidth:this.markdownContentMinWidth}:{})(),class:"width100 bg-white flex flex-shrink-0 align-items-center justify-content-center title"},[this.title]),this.loading?o(n,{style:"background-color: transparent",showModal:!0},{default:()=>[o("div",{style:"font-weight: bold",class:"width100 height100 flex align-items-center justify-content-center"},[d("加载中...")])]}):o("div",{class:"width100 height100 relative flex overflow-auto markdown-content"},[o("div",{class:"width100 height0",style:this.ifLarger?{minWidth:this.markdownContentMinWidth}:{}},[o("div",{style:"padding-bottom: 100px"},[o(s("v-md-preview"),{class:"width100",ifLarger:this.ifLarger,onGetVMdPreviewRef:t=>{this.preview=t},text:this.htmlMarkStr},null)])]),this.ifLarger&&this.articleTitles.length?o(s("navigator-title"),{markdownTitleWidth:this.markdownTitleWidth,articleTitles:this.articleTitles,onHandleAnchorClick:t=>{this.handleAnchorClick(t)}},null):null])])}};export{c as _};
