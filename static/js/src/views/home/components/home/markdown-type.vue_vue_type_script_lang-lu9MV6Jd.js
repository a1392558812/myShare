const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../../../../../../css/src/components/loading/loading-Cn048VR9.css"])))=>i.map(i=>d[i]);
import{_ as t}from"../../../../../vite/preload-helper-Cu0sd_0_.js";import{$ as e}from"../../../../../jquery-IViRahhZ.js";import{n as i}from"./navigator-title-BUhYgrbi.js";import{l as r}from"../../../../components/loading/loading-CS82ZUo3.js";import{R as l,e as o,j as n,N as a,P as s,n as d}from"../../../../../@vue-runtime-core-lkGMyH8G.js";import{r as h}from"../../../../../@vue-reactivity-mdokXGQ5.js";const m={name:"home-markdown-type",components:{navigatorTitle:i,loadingComponent:r,vMdPreview:l((()=>t((()=>import("../../../../components/v-md-preview/index-dD1emuLy.js")),__vite__mapDeps([0]),import.meta.url)))},props:{headerH:{type:String,default:"70px"},loading:{type:Boolean,default:!0},ifLarger:{type:Boolean,default:!0},htmlMD:{type:String,default:""},markdownTitleWidth:{type:String,default:""},title:{type:String,default:""}},setup(t){const i=h(null),r=h([]),l=h("550px"),n=h(""),a=()=>{if(i.value){const t=i.value.$el.querySelectorAll("h1,h2,h3,h4,h5,h6"),e=Array.from(t).filter((t=>!!t.innerText.trim()));if(!e.length)return void(r.value=[]);const l=Array.from(new Set(e.map((t=>t.tagName)))).sort();r.value=e.map((t=>({title:t.innerText,lineIndex:t.getAttribute("data-v-md-line"),indent:l.indexOf(t.tagName)})))}else setTimeout((()=>{a()}))};return o((()=>t.htmlMD),((t,e)=>{t!==e&&t&&(n.value=t,d().then((()=>{a()})))}),{immediate:!0}),{preview:i,htmlMarkStr:n,articleTitles:r,markdownContentMinWidth:l,handleAnchorClick:t=>{const{lineIndex:r}=t;let l=i.value.$el.querySelector(`[data-v-md-line="${r}"]`);l&&i.value.scrollToTarget({target:l,scrollContainer:e(".markdown-content")[0]}),l=null}}},render(){return n("div",{class:"w-[100%] h-[100%] relative overflow-hidden flex flex-col"},[n("div",{style:(()=>this.ifLarger?this.articleTitles.length?{minWidth:`calc(${this.markdownContentMinWidth} + ${this.markdownTitleWidth})`}:{minWidth:this.markdownContentMinWidth}:{})(),class:"w-[100%] bg-style text-[var(--global-text-color)] flex shrink-0 items-center justify-center box-border px-[30px] py-[20px] text-[20px] [font-weight:600] [border-bottom:1px_solid_var(--global-border-color)] [box-shadow:0px_0px_1px_0px_var(--global-border-color)] z-[1] markdown-type-title"},[this.title]),this.loading?n(r,{style:"background-color: transparent",showModal:!0},{default:()=>[n("div",{style:"font-weight: bold",class:"w-[100%] h-[100%] flex items-center justify-center"},[s("加载中...")])]}):n("div",{class:"w-[100%] h-[100%] relative flex overflow-auto markdown-content"},[n("div",{class:"w-[100%] h-0",style:this.ifLarger?{minWidth:this.markdownContentMinWidth}:{}},[n("div",{style:"padding-bottom: 100px"},[n(a("v-md-preview"),{class:"w-[100%]",ifLarger:this.ifLarger,onGetVMdPreviewRef:t=>{this.preview=t},text:this.htmlMarkStr},null)])]),this.ifLarger&&this.articleTitles.length?n(a("navigator-title"),{markdownTitleWidth:this.markdownTitleWidth,articleTitles:this.articleTitles,onHandleAnchorClick:t=>{this.handleAnchorClick(t)}},null):null])])}};export{m as _};
