import{a as e,u as t}from"../../../vue-router-BcUl0JBZ.js";import{u as o}from"../../../vuex-Cumh--Ml.js";import{d as a,c as r,b as l,S as i,a as n}from"../../store/actionType-DZz6-cZB.js";import{a as s}from"../../common/axios/index-CK6lisJl.js";import{m,i as d,d as p,e as c}from"../../common/util/methods-C08ehvW-.js";import{l as u}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as h}from"../../components/left-sidebar/index-Bs56zGfq.js";import{o as v}from"./components/home/other-type-d745BGjj.js";import{i as f}from"./components/home/image-type-AcC4Le1q.js";import{_ as g}from"./components/home/markdown-type.vue_vue_type_script_lang-CATO_xwE.js";import{_ as y}from"../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as x}from"../../../@vue-reactivity-UKyDGrvc.js";import{b as j,e as w,N as b,U as k,m as _,a as T,g as M,j as L,l as P,F as D,s as S,c as q,x as C,y as E,n as I}from"../../../@vue-runtime-core-hXVbjtl0.js";import{k as W,n as H}from"../../../@vue-shared-LkD7rn4X.js";import"../../../@vue-devtools-api-CFGE8QBr.js";import"../../../axios-DPD4D5Qz.js";import"../../../__commonjsHelpers__-MdiGH4nz.js";import"../../../nprogress-DbBgBvvH.js";import"../../components/left-sidebar/index.vue_vue_type_script_lang-BL585oWh.js";import"../../../@vue-runtime-dom-DIQGxI75.js";import"../../../@better-scroll-yEU79_0X.js";import"../../common/util/debounce-CNl5k4zp.js";import"../../components/left-sidebar/components/left-sidebar-item-D_7M1L7O.js";import"../../components/left-sidebar/components/left-sidebar-item.vue_vue_type_script_lang-BHW2UAZP.js";import"../../components/left-sidebar/components/link-tag-BuOHO9lp.js";import"../../components/commonm-btn/index-BgmKgvkM.js";import"../../components/left-sidebar/components/left-sidebar-search-DyQOYX1l.js";import"../../../@vueuse-C17lgTZK.js";import"./components/home/image-type.vue_vue_type_script_lang-B1bGYzg1.js";import"../../../vite/preload-helper-Cu0sd_0_.js";import"../../../jquery-IViRahhZ.js";import"./components/home/navigator-title-RRAqMQdd.js";import"../../components/loading/loading-CBFkRS8_.js";const N={name:"view-home",components:{layoutLeftSidebar:h,markdownType:g,otherType:v,imageType:f},props:{...u},setup(u){const h=e(),v=t(),f=o(),g=x(""),y=x("ReadMe-前言"),b=x(""),k=x("文件"),_=x(!0);let T=()=>{};const M=j((()=>m(b.value))),L=j((()=>d(b.value))),P=j((()=>"link"===b.value)),D=j((()=>f.state.menuData.menuList)),S=()=>{I().then((()=>{document.querySelector(".home").scrollTop=0}))},q=e=>{const t=e.split("-");try{let a={children:D.value};if(t.forEach((e=>{a=a.children[+e]})),!a)return h.push("/");if(Object.prototype.hasOwnProperty.call(a,"children"))throw new Error("不合法的路由参数");if(f.dispatch(l,{indexPage:e}),f.dispatch(i,e),f.dispatch(n,{indexPage:e}),a&&a.link)return o=a.link,_.value=!1,b.value="link",y.value="链接",g.value=o,void window.open(o);const r=a.url[a.url.length-1].split(".");b.value=r[r.length-1]?r[r.length-1]:"";const m=`./${a.url.join("/")}`;if(y.value=a.url.join(" > "),_.value=!0,L.value)return(e=>{g.value=e,S()})(m);if(M.value)return(e=>{const{promise:t,cancel:o}=p(s.get(e));T({type:"cancel"}),T=o,t.then((e=>{_.value=!1,g.value=c.find((e=>e.suffix===b.value.toLocaleLowerCase())).formatFun(e.data),S()})).catch((e=>{e.type&&"cancel"===e.type||(g.value="网络寄了，我哭哭~~",b.value="md",_.value=!1)}))})(m);((e,t)=>{k.value=e[e.length-1],g.value=t,S()})(a.url,m)}catch(a){h.push("/error")}var o};return w((()=>v.query),(()=>{f.dispatch(a).then((()=>{const e=v.query.indexPage||"";u.toggleMenu(!1),e?q(e):(f.dispatch(r,{indexPage:e}),(()=>{b.value="md",_.value=!0;const{promise:e,cancel:t}=p(s.get("./README.md"));T({type:"cancel"}),T=t,e.then((e=>{_.value=!1,g.value=e.data})).catch((e=>{e.type&&"cancel"===e.type||(_.value=!1,g.value="寄拉！")}))})())}))}),{immediate:!0}),{menuList:D,markdownType:M,markdownTitleWidth:x("300px"),imageType:L,linkType:P,loading:_,htmlMD:g,title:y,fileSuffix:b,downloadName:k,itemClick:e=>{e.indexPage!==v.query.indexPage&&h.push({path:"/",query:{indexPage:e.indexPage}})}}}},O={class:"content-inner bg-style text-[var(--global-primary-color)] text-[15px] overflow-hidden w-[100%] h-[100%] flex flex-row"},A=(e=>(C("data-v-edf33c34"),e=e(),E(),e))((()=>P("div",{class:"bg-image overflow-hidden w-[100%] h-[100%] absolute"},null,-1))),F={class:"home overflow-auto relative w-[100%] h-[100%]"},R={key:0,class:"w-[100%] flex items-center justify-center box-border px-[30px] py-[0] min-h-[70px] text-20px font-600 text-[var(--global-text-color)] border-b-1px border-b-solid border-b-[var(--global-border-color)]"},U={key:3,class:"p-[20px]"},$=["href"];const z=y(N,[["render",function(e,t,o,a,r,l){const i=b("layout-left-sidebar"),n=b("markdown-type"),s=b("image-type"),m=b("other-type"),d=k("loading");return _((T(),M("div",O,[L(i,{"left-sidebar-w":e.leftSidebarW,"if-show-menu":e.ifShowMenu,"if-larger":e.ifLarger,"header-h":e.headerH,"toggle-menu":e.toggleMenu,onItemClick:a.itemClick},null,8,["left-sidebar-w","if-show-menu","if-larger","header-h","toggle-menu","onItemClick"]),P("div",{style:H(e.ifLarger?{width:`calc(100% - ${e.leftSidebarW})`}:{width:"100%"}),class:"relative h-[100%]"},[A,P("div",F,[a.menuList.length?(T(),M(D,{key:0},[a.markdownType?S("",!0):(T(),M("div",R,W(a.title),1)),a.markdownType?(T(),q(n,{key:1,title:a.title,"markdown-title-width":a.markdownTitleWidth,loading:a.loading,"if-larger":e.ifLarger,"header-h":e.headerH,"html-m-d":a.htmlMD},null,8,["title","markdown-title-width","loading","if-larger","header-h","html-m-d"])):a.imageType?(T(),q(s,{key:2,"html-m-d":a.htmlMD,loading:a.loading,onImageLoad:t[0]||(t[0]=e=>a.loading=!1)},null,8,["html-m-d","loading"])):a.linkType?(T(),M("div",U,[P("a",{href:a.htmlMD,class:"text-[var(--global-text-color)]"},"链接： "+W(a.htmlMD),9,$)])):(T(),q(m,{key:4,"download-name":a.downloadName,"html-m-d":a.htmlMD},null,8,["download-name","html-m-d"]))],64)):S("",!0)])],4)])),[[d,!a.menuList.length]])}],["__scopeId","data-v-edf33c34"]]);export{z as default};
