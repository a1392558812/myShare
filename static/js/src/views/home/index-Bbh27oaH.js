import{a as e,u as t}from"../../../vue-router-DBqTrJEm.js";import{u as o}from"../../../vuex-C9rRLaBQ.js";import{c as a,d as i,b as n,S as r,a as l}from"../../store/actionType-CNHuB-Of.js";import{a as s}from"../../common/axios/index-CK6lisJl.js";import{m,i as p,d,e as u}from"../../common/util/methods-G0pJ8i8C.js";import{l as c}from"../../common/props/left-sidebar-props/index-Cvo_KCZG.js";import{l as h}from"../../components/left-sidebar/index-COEZzOFJ.js";import{o as v}from"./components/home/other-type-ZDyGnIpG.js";import{i as f}from"./components/home/image-type-DItn-lo4.js";import{m as g}from"./components/home/markdown-type-Dji_Fmum.js";import{_ as y}from"../../../plugin-vue_export-helper-BCo6x5W8.js";import{r as j}from"../../../@vue-reactivity-mdokXGQ5.js";import{b as w,e as k,N as b,U as x,m as _,a as T,g as L,j as M,l as P,F as q,s as D,c as S,x as C,y as I,n as E}from"../../../@vue-runtime-core-lkGMyH8G.js";import{k as N,n as W}from"../../../@vue-shared-LkD7rn4X.js";import"../../../@vue-devtools-api-CFGE8QBr.js";import"../../../axios-DPD4D5Qz.js";import"../../../__commonjsHelpers__-MdiGH4nz.js";import"../../../nprogress-DbBgBvvH.js";import"../../components/left-sidebar/index.vue_vue_type_script_lang-CAZBCQVB.js";import"../../../@vue-runtime-dom-Dkxbnx-0.js";import"../../../@better-scroll-yEU79_0X.js";import"../../common/util/debounce-CNl5k4zp.js";import"../../components/left-sidebar/components/left-sidebar-item-rX2ZajyK.js";import"../../components/left-sidebar/components/left-sidebar-item.vue_vue_type_script_lang-N8m5Gsoa.js";import"../../components/left-sidebar/components/link-tag-V73iQm_N.js";import"../../components/commonm-btn/index-hUJDFDzu.js";import"../../components/left-sidebar/components/left-sidebar-search-BScumNLs.js";import"../../../@vueuse-CzS49P4w.js";import"./components/home/image-type.vue_vue_type_script_lang-DyB6yle9.js";import"./components/home/markdown-type.vue_vue_type_script_lang-Ds5vQ9We.js";import"../../../vite/preload-helper-Cu0sd_0_.js";import"../../../jquery-IViRahhZ.js";import"./components/home/navigator-title-muPm6RwD.js";import"../../components/loading/loading-DeNHmGK8.js";const H={name:"view-home",components:{layoutLeftSidebar:h,markdownType:g,otherType:v,imageType:f},props:{...c},setup(c){const h=e(),v=t(),f=o(),g=j(""),y=j("ReadMe-前言"),b=j(""),x=j("文件"),_=j(!0);let T=()=>{};const L=w((()=>m(b.value))),M=w((()=>p(b.value))),P=w((()=>"link"===b.value)),q=w((()=>f.state.menuData.menuList)),D=()=>{E().then((()=>{document.querySelector(".home").scrollTop=0}))},S=e=>{const t=e.split("-");try{let a={children:q.value};if(t.forEach((e=>{a=a.children[+e]})),!a)return h.push("/");if(Object.prototype.hasOwnProperty.call(a,"children"))throw new Error("不合法的路由参数");if(f.dispatch(n,{indexPage:e}),f.dispatch(r,e),f.dispatch(l,{indexPage:e}),a&&a.link)return o=a.link,_.value=!1,b.value="link",y.value="链接",g.value=o,void window.open(o);const i=a.url[a.url.length-1].split(".");b.value=i[i.length-1]?i[i.length-1]:"";const m=`./${a.url.join("/")}`;if(y.value=a.url.join(" > "),_.value=!0,M.value)return(e=>{g.value=e,D()})(m);if(L.value)return(e=>{const{promise:t,cancel:o}=d(s.get(e));T({type:"cancel"}),T=o,t.then((e=>{_.value=!1,g.value=u.find((e=>e.suffix===b.value.toLocaleLowerCase())).formatFun(e.data),D()})).catch((e=>{e.type&&"cancel"===e.type||(g.value="网络寄了，我哭哭~~",b.value="md",_.value=!1)}))})(m);((e,t)=>{x.value=e[e.length-1],g.value=t,D()})(a.url,m)}catch(a){h.push("/error")}var o};return k((()=>v.query),(()=>{f.dispatch(a).then((()=>{const e=v.query.indexPage||"";c.toggleMenu(!1),e?S(e):(f.dispatch(i,{indexPage:e}),(()=>{b.value="md",_.value=!0;const{promise:e,cancel:t}=d(s.get("./README.md"));T({type:"cancel"}),T=t,e.then((e=>{_.value=!1,g.value=e.data})).catch((e=>{e.type&&"cancel"===e.type||(_.value=!1,g.value="寄拉！")}))})())}))}),{immediate:!0}),{menuList:q,markdownType:L,markdownTitleWidth:j("300px"),imageType:M,linkType:P,loading:_,htmlMD:g,title:y,fileSuffix:b,downloadName:x,itemClick:e=>{e.indexPage!==v.query.indexPage&&h.push({path:"/",query:{indexPage:e.indexPage}})}}}},R={class:"content-inner bg-style overflow-hidden w-[100%] h-[100%] flex flex-row"},F=(e=>(C("data-v-17207423"),e=e(),I(),e))((()=>P("div",{class:"bg-image overflow-hidden w-[100%] h-[100%] absolute"},null,-1))),O={class:"home overflow-auto relative w-[100%] h-[100%]"},$={key:0,class:"title w-[100%] flex items-center justify-center"},A={key:3,class:"link"},G=["href"];const J=y(H,[["render",function(e,t,o,a,i,n){const r=b("layout-left-sidebar"),l=b("markdown-type"),s=b("image-type"),m=b("other-type"),p=x("loading");return _((T(),L("div",R,[M(r,{"left-sidebar-w":e.leftSidebarW,"if-show-menu":e.ifShowMenu,"if-larger":e.ifLarger,"header-h":e.headerH,"toggle-menu":e.toggleMenu,onItemClick:a.itemClick},null,8,["left-sidebar-w","if-show-menu","if-larger","header-h","toggle-menu","onItemClick"]),P("div",{style:W(e.ifLarger?{width:`calc(100% - ${e.leftSidebarW})`}:{width:"100%"}),class:"relative h-[100%]"},[F,P("div",O,[a.menuList.length?(T(),L(q,{key:0},[a.markdownType?D("",!0):(T(),L("div",$,N(a.title),1)),a.markdownType?(T(),S(l,{key:1,title:a.title,"markdown-title-width":a.markdownTitleWidth,loading:a.loading,"if-larger":e.ifLarger,"header-h":e.headerH,"html-m-d":a.htmlMD},null,8,["title","markdown-title-width","loading","if-larger","header-h","html-m-d"])):a.imageType?(T(),S(s,{key:2,"html-m-d":a.htmlMD,loading:a.loading,onImageLoad:t[0]||(t[0]=e=>a.loading=!1)},null,8,["html-m-d","loading"])):a.linkType?(T(),L("div",A,[P("a",{href:a.htmlMD},"链接： "+N(a.htmlMD),9,G)])):(T(),S(m,{key:4,"download-name":a.downloadName,"html-m-d":a.htmlMD},null,8,["download-name","html-m-d"]))],64)):D("",!0)])],4)])),[[p,!a.menuList.length]])}],["__scopeId","data-v-17207423"]]);export{J as default};
