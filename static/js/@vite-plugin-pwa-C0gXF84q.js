import{_ as e}from"./vite/preload-helper-Cu0sd_0_.js";import{r}from"./@vue-reactivity-Bg8cIJPh.js";function n(n={}){const{immediate:t=!0,onNeedRefresh:i,onOfflineReady:o,onRegistered:a,onRegisteredSW:s,onRegisterError:d}=n,l=r(!1),c=r(!1),f=function(r={}){const{immediate:n=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:o,onRegisteredSW:a,onRegisterError:s}=r;let d,l;return l=async function(){if("serviceWorker"in navigator){if(d=await e((async()=>{const{Workbox:e}=await import("./workbox-window-p40uij6f.js");return{Workbox:e}}),[],import.meta.url).then((({Workbox:e})=>new e("./sw.js",{scope:"./",type:"classic"}))).catch((e=>{null==s||s(e)})),!d)return;d.addEventListener("activated",(e=>{(e.isUpdate||e.isExternal)&&window.location.reload()})),d.addEventListener("installed",(e=>{e.isUpdate||null==i||i()})),d.register({immediate:n}).then((e=>{a?a("./sw.js",e):null==o||o(e)})).catch((e=>{null==s||s(e)}))}}(),async(e=!0)=>{await l}}({immediate:t,onNeedRefresh(){l.value=!0,null==i||i()},onOfflineReady(){c.value=!0,null==o||o()},onRegistered:a,onRegisteredSW:s,onRegisterError:d});return{updateServiceWorker:f,offlineReady:c,needRefresh:l}}export{n as u};
