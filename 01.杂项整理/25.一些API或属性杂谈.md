## will-change

> [CSS](https://developer.mozilla.org/zh-CN/docs/Web/CSS) å±æ€§ `will-change` ä¸ºwebå¼€å‘è€…æä¾›äº†ä¸€ç§å‘ŠçŸ¥æµè§ˆå™¨è¯¥å…ƒç´ ä¼šæœ‰å“ªäº›å˜åŒ–çš„æ–¹æ³•ï¼Œè¿™æ ·æµè§ˆå™¨å¯ä»¥åœ¨å…ƒç´ å±æ€§çœŸæ­£å‘ç”Ÿå˜åŒ–ä¹‹å‰æå‰åšå¥½å¯¹åº”çš„ä¼˜åŒ–å‡†å¤‡å·¥ä½œã€‚ è¿™ç§ä¼˜åŒ–å¯ä»¥å°†ä¸€éƒ¨åˆ†å¤æ‚çš„è®¡ç®—å·¥ä½œæå‰å‡†å¤‡å¥½ï¼Œä½¿é¡µé¢çš„ååº”æ›´ä¸ºå¿«é€Ÿçµæ•ã€‚
>
> 1. **ä¸è¦å°† will-change åº”ç”¨åˆ°å¤ªå¤šå…ƒç´ ä¸Š**(åªç»™å³å°†å¼€å¯åŠ¨ç”»çš„å…ƒç´ æ·»åŠ )
> 2. **æœ‰èŠ‚åˆ¶åœ°ä½¿ç”¨**(will-changeå‘Šè¯‰æµè§ˆå™¨ï¼Œç›®æ ‡å…ƒç´ å¯èƒ½ä¼šç»å¸¸å˜åŒ–ï¼Œæµè§ˆå™¨ä¼šå°†ä¼˜åŒ–å·¥ä½œä¿å­˜å¾—æ¯”ä¹‹å‰æ›´ä¹…ï¼Œæœ€ä½³å®è·µæ˜¯å½“å…ƒç´ å˜åŒ–ä¹‹å‰å’Œä¹‹åé€šè¿‡è„šæœ¬æ¥åˆ‡æ¢ `will-change` çš„å€¼ï¼Œå³æˆ‘ä»¬éœ€è¦ä½¿ç”¨jsæ¥åŠ¨æ€çš„æ§åˆ¶will-changeçš„æ·»åŠ )
> 3. **ä¸è¦è¿‡æ—©åº”ç”¨ will-change ä¼˜åŒ–**ï¼ˆwill-changeæ˜¯æˆ‘ä»¬æœ€åçš„ä¼˜åŒ–æ‰‹æ®µï¼Œè€Œä¸æ˜¯é¦–é€‰ï¼‰
> 4. **ç»™å®ƒè¶³å¤Ÿçš„å·¥ä½œæ—¶é—´**

```js
var el = document.getElementById('element');
// å½“é¼ æ ‡ç§»åŠ¨åˆ°è¯¥å…ƒç´ ä¸Šæ—¶ç»™è¯¥å…ƒç´ è®¾ç½® will-change å±æ€§
el.addEventListener('mouseenter', hintBrowser);
// å½“ CSS åŠ¨ç”»ç»“æŸåæ¸…é™¤ will-change å±æ€§
el.addEventListener('animationEnd', removeHint);
function hintBrowser() {
  // å¡«å†™ä¸Šé‚£äº›ä½ çŸ¥é“çš„ï¼Œä¼šåœ¨ CSS åŠ¨ç”»ä¸­å‘ç”Ÿæ”¹å˜çš„ CSS å±æ€§åä»¬
  this.style.willChange = 'transform, opacity';
}
function removeHint() {
  this.style.willChange = 'auto';
}
```

## Vue.observable( object )

> è®©ä¸€ä¸ªå¯¹è±¡å¯å“åº”ã€‚Vue å†…éƒ¨ä¼šç”¨å®ƒæ¥å¤„ç† `data` å‡½æ•°è¿”å›çš„å¯¹è±¡ã€‚è¿”å›çš„å¯¹è±¡å¯ä»¥ç›´æ¥ç”¨äº[æ¸²æŸ“å‡½æ•°](https://cn.vuejs.org/v2/guide/render-function.html)å’Œ[è®¡ç®—å±æ€§](https://cn.vuejs.org/v2/guide/computed.html)å†…ï¼Œå¹¶ä¸”ä¼šåœ¨å‘ç”Ÿå˜æ›´æ—¶è§¦å‘ç›¸åº”çš„æ›´æ–°ã€‚ä¹Ÿå¯ä»¥ä½œä¸ºæœ€å°åŒ–çš„è·¨ç»„ä»¶çŠ¶æ€å­˜å‚¨å™¨ï¼Œç”¨äºç®€å•çš„åœºæ™¯ï¼š

```html
const state = Vue.observable({ count: 0 })
const Demo = {
  render(h) {
    return h('button', {
      on: { click: () => { state.count++ }}
    }, `count is: ${state.count}`)
  }
}
```

> å¦‚æœè¯¥stateå¯ä»¥é€šè¿‡.æ“ä½œç¬¦æ¥è¿›è¡Œè¯»å†™ï¼Œé‚£æ•°æ®æµå‘å°±ä¸å¥½æŒæ¡ï¼Œéœ€è¦è¿›è¡Œè¯»å†™åˆ†ç¦»

## vueæ¢å¤åˆå§‹æ•°æ®

> åœ¨vueå¼€å‘åœºæ™¯ï¼Œæœ‰äº›åœºæ™¯æ¯”å¦‚â€œæ‰“å¼€æ¨¡æ€æ¡†â€ç­‰åœ¨å…³é—­è¿™ä¸ªæ¨¡æ€æ¡†æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦é‡ç½®è¿™ä¸ªæ¨¡æ€æ¡†ç»„ä»¶å†…çš„å€¼
>
> ä¹‹å‰æˆ‘çš„åŠæ³•æ˜¯å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå«init()ï¼Œç„¶åå°†dataä¸­çš„æ•°æ®ä¸€ä¸€é‡ç½®ä¸ºåŸæ¥æ•°æ®
>
>  1. ä½†æ˜¯ä¸€æ—¦dataä¸­æ•°æ®å¤šäº†ï¼Œå†å»ç»´æŠ¤è¿™ä¸ªinitå°±éº»çƒ¦äº†
>
>  2. emmmmæ¯æ¬¡æ·»åŠ ä¸€ä¸ªdata,å°±éœ€è¦åœ¨è¿™ä¸ªinité‡Œé‡ç½®è¿™ä¸ªå­—æ®µ
>
> ç°åœ¨æœ‰ä¸ªå¥½åŠæ³•ï¼Œé‚£å°±æ˜¯this.$options.data() ä¸this.$data 
>
> 	1. this.$options.data() ï¼švueåŸå§‹çš„æ•°æ®
> 	2. this.$data ï¼šç°åœ¨é˜¶æ®µçš„vueæ•°æ®

å¦‚æœæˆ‘ä»¬é‡å†™initå‡½æ•°ä¸º

```js
methods:{
    init() {
        Object.assign(this.$data, this.$options.data())
    }
}
```

å•Šè¿™......æ˜¯ä¸æ˜¯æ–¹ä¾¿å¤šäº†

## Vueçš„prop ç±»å‹å¼•ç”¨

æ¯”æˆ‘æˆ‘ä»¬æœ‰ä¸€ä¸ªç»„ä»¶`<item-card>`æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªç»„ä»¶`<list>`ï¼Œæœ‰ä¸€ä¸ªæç«¯çš„åœºæ™¯ï¼Œç»„ä»¶`<item-card>`éœ€è¦æ‰€æœ‰çš„ä¼ å…¥åˆ°`<list>`ç»„ä»¶ä¸­çš„propsï¼Œï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªå…¶ä»–åœºæ™¯ä¿©ç»„ä»¶éœ€è¦ç›¸åŒçš„propsï¼Œä¸ä¸€å®šéè¦åµŒå¥—ï¼Œæ­¤å¤„åªæ˜¯ä¸¾ä¾‹ğŸŒ°ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹prop ç±»å‹è¿›è¡ŒéªŒè¯ï¼Œç„¶åå°±---->å¤åˆ¶ç²˜è´´ï¼Ÿ

* list

```html
<template>
	<list>
       <item-card :test1="test1" :test2="test2" :test3="test3"/>
    </list>	
</template>
<script>
    export default{
        props:{
            test1:{
                type: [String, Number],
                default: 0,
            },
             test2:{
                type: [String, Number],
                default: 1,
            },
             test3:{
                type: [String, Number],
                default: 2,
            },
            // å‡è®¾ä»¥åæœ‰æ›´å¤šæ›´å¤æ‚çš„propséœ€è¦ä¼ å…¥åˆ°item-card,
        }
    }
</script>
```

æœ‰æ²¡æœ‰åŠæ³•ä¸€åŠ³æ°¸é€¸

* item-card

```html
<template>
	<div>
        ğŸ®ğŸº666ï¼Œè¿™æ˜¯ä¸€ä¸ªcardğŸ˜ğŸ˜ğŸ˜ğŸ˜ğŸ˜
    </div>
</template>
<script>
    import list from './list'
    export default{
        props:{ // ç›´æ¥è§£æ„èµ‹å€¼å³å¯
           ...list.props, // å•Šè¿™....è¿˜æœ‰è¿™ç§æ“ä½œï¼ï¼Ÿ
        },
        components:{ list }
    }
</script>
```

## å››èˆäº”å…¥çš„æ•°å­—

`toFixed()` æ–¹æ³•ä½¿ç”¨å®šç‚¹è¡¨ç¤ºæ³•æ¥æ ¼å¼åŒ–ä¸€ä¸ªæ•°å€¼ã€‚

```js
var pi =3.1415;
pi = pi.toFixed(2);  // toFixed()è¿”å›çš„æ˜¯å­—ç¬¦ä¸²è€Œä¸æ˜¯æ•°å­—
```

# uni-appçš„é—ªå±

1. å¦‚æœæ˜¯æ–°é¡µé¢è¿›å…¥æ—¶èƒŒæ™¯é—ªç™½

   - å¦‚æœé¡µé¢èƒŒæ™¯æ˜¯æ·±è‰²ï¼Œåœ¨vueé¡µé¢ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ–°çª—ä½“åˆšå¼€å§‹åŠ¨ç”»æ—¶æ˜¯ç°ç™½è‰²èƒŒæ™¯ï¼ŒåŠ¨ç”»ç»“æŸæ—¶æ‰å˜ä¸ºæ·±è‰²èƒŒæ™¯ï¼Œé€ æˆé—ªå±ã€‚è¿™æ˜¯å› ä¸ºwebviewçš„èƒŒæ™¯ç”Ÿæ•ˆå¤ªæ…¢çš„é—®é¢˜ã€‚æ­¤æ—¶éœ€å°†æ ·å¼å†™åœ¨ `App.vue` é‡Œï¼Œå¯ä»¥åŠ é€Ÿé¡µé¢æ ·å¼æ¸²æŸ“é€Ÿåº¦ã€‚`App.vue` é‡Œé¢çš„æ ·å¼æ˜¯å…¨å±€æ ·å¼ï¼Œæ¯æ¬¡æ–°å¼€é¡µé¢ä¼šä¼˜å…ˆåŠ è½½ `App.vue` é‡Œé¢çš„æ ·å¼ï¼Œç„¶ååŠ è½½æ™®é€š vue é¡µé¢çš„æ ·å¼ã€‚

   - appç«¯è¿˜å¯ä»¥åœ¨pages.jsonçš„é¡µé¢çš„styleé‡Œå•ç‹¬é…ç½®é¡µé¢åŸç”ŸèƒŒæ™¯è‰²ï¼Œæ¯”å¦‚åœ¨globalStyle->style->app-plus->backgroundä¸‹é…ç½®å…¨å±€èƒŒæ™¯è‰²

     ```json
     "style": {  
     "app-plus": {  
        "background":"#000000"
     }  
     }
     ```

   - å¦å¤–nvueé¡µé¢ä¸å­˜åœ¨æ­¤é—®é¢˜ï¼Œä¹Ÿå¯ä»¥æ›´æ”¹ä¸ºnvueé¡µé¢ã€‚

   - æ³¨æ„ï¼šä»¥ä¸Šä¼˜åŒ–æ–¹æ¡ˆåœ¨ HBuilderX 2.7.7 ä»¥ä¸Šç‰ˆæœ¬æ—¶è¿è¡Œåœ¨ iOS12 ä»¥ä¸‹ç³»ç»Ÿæ•ˆæœè¾ƒå·®ï¼Œè¯·ç­‰å¾…ä¼˜åŒ–ã€‚

2. å¦‚æœæ˜¯è€é¡µé¢æ¶ˆå¤±æ—¶èƒŒæ™¯é—ªç™½ Androidä¸ŠpopinåŠ¨ç”»æ—¶ï¼Œè€çª—ä½“ä¼šæœ‰ä¸€ä¸ªåŠé€æ˜æ¶ˆå¤±çš„æ•ˆæœã€‚è¿™ä¸ªåŠé€æ˜æ•ˆæœçš„èƒŒæ™¯è‰²ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒèŠ‚ä¸ºæš—è‰²ç³»ã€‚ åœ¨pages.jsoné‡ŒglobalStyleä¸‹æˆ–æŒ‡å®šé¡µé¢ä¸‹ï¼Œé…ç½®app-plusä¸“å±èŠ‚ç‚¹ï¼Œç„¶åé…ç½®animationAlphaBGColorå±æ€§ã€‚

## CSSè®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨

* -webkit-font-smoothing: antialiased;

## overflow:scrollå¹³æ»‘æ»šåŠ¨

* -webkit-overflow-scrolling: touch;

## reactçš„useEffect

* ä»…å½“åšcomonentDidMountçš„æ—¶å€™

  * ```js
    useEffect(() => {
        console.log('ä»…å½“åšcomponentDidMount');
    },[])
    ```

* å½“åšcomponentWillunmountçš„æ—¶å€™ï¼Œ**è¿™é‡Œä¸æ˜¯ä»…å½“åšcomponentWillunmount**

   * ```js
     useEffect(() => () => {
         console.log('å½“åšcomponentWillUnmount');
     })
     ```

* å½“åšcomonentDidMount + componentWillunmountçš„æ—¶å€™

  * ```js
    useEffect(() => {
        fun1()
        return () => {
            fun2()
        }
    })
    ```

* åªæœ‰æŒ‡å®šæ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™æ‰è§¦å‘effect
  * ```js
    useEffect(() => {
        document.title = count;
    }, [count]) 
    ```

* åœ¨useEffectä¸­ç›´æ¥ä½¿ç”¨asyncå’Œawaitæ˜¯ä¼šæŠ¥é”™çš„ï¼Œä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°æ¥åŒ…è£¹å¼‚æ­¥å‡½æ•°ã€‚
  * ```js
    useEffect(() => {
        (async function () {
            const result = await getData();
            console.log(result);
        })()
    },[])
    ```

## Promise.allSettled()

> `Promise.allSettled()` å¯ç”¨äºå¹¶è¡Œæ‰§è¡Œç‹¬ç«‹çš„å¼‚æ­¥æ“ä½œï¼Œå¹¶æ”¶é›†è¿™äº›æ“ä½œçš„ç»“æœã€‚
>
> è¯¥å‡½æ•°æ¥å—ä¸€ä¸ª `promise` æ•°ç»„(é€šå¸¸æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡)ä½œä¸ºå‚æ•°: `const statusesPromise = Promise.allSettled(promises);`

* å½“æ‰€æœ‰çš„è¾“å…¥ `promises` éƒ½è¢« `resolve` æˆ– `reject` æ—¶ï¼Œ`statusesPromise` ä¼šè§£æä¸ºä¸€ä¸ªå…·æœ‰å®ƒä»¬çŠ¶æ€çš„æ•°ç»„
  * `{ status: 'fulfilled', value: value }` å¯¹åº”çš„ promise å·²ç» `resolve`
  * `{status: 'rejected'ï¼Œ reason: reason}` å¯¹åº”çš„ promise å·²è¢« `reject`

```js
  const promise = () => {
    return new Promise((resolve, reject) => {
      let timeDelay = (Math.random() * 2 + 1) * 1000
      setTimeout(() => {
        if (parseInt(timeDelay) % 2) {
          resolve(timeDelay)
        } else {
          reject(timeDelay)
        }
      }, timeDelay)
    })
  }
  Promise.allSettled([promise(), promise(), promise(), promise(), promise(), promise()])
  .then(res => {
    console.log(res)
  })
```

