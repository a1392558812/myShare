# ES6æ‚é¡¹è¡¥å……

> JavaScript åŸæœ‰çš„è¡¨ç¤ºâ€œé›†åˆâ€çš„æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯æ•°ç»„ï¼ˆ`Array`ï¼‰å’Œå¯¹è±¡ï¼ˆ`Object`ï¼‰ï¼ŒES6 åˆæ·»åŠ äº†`Map`å’Œ`Set`ã€‚è¿™æ ·å°±æœ‰äº†å››ç§æ•°æ®é›†åˆï¼Œç”¨æˆ·è¿˜å¯ä»¥ç»„åˆä½¿ç”¨å®ƒä»¬ï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚æ•°ç»„çš„æˆå‘˜æ˜¯`Map`ï¼Œ`Map`çš„æˆå‘˜æ˜¯å¯¹è±¡ã€‚è¿™æ ·å°±éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶ï¼Œæ¥å¤„ç†æ‰€æœ‰ä¸åŒçš„æ•°æ®ç»“æ„ã€‚
>
> 
>
> éå†å™¨ï¼ˆIteratorï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½² Iterator æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³ä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚

* ä½œç”¨
  * ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£
  * ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—
  *  ES6 åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤`for...of`å¾ªç¯ï¼ŒIterator æ¥å£ä¸»è¦ä¾›`for...of`æ¶ˆè´¹

>æ¯ä¸€æ¬¡è°ƒç”¨`next`æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«`value`å’Œ`done`ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ã€‚å…¶ä¸­ï¼Œ`value`å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ`done`å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚

```js
//Array
const items = ["0", "1", "2"]; 
const it = items[Symbol.iterator](); 
it.next(); // {value: "0", done: false} 
it.next(); // {value: "1", done: false}
it.next(); // {value: "2", done: false} 
it.next(); // {value: undefined, done: true}


const map = new Map(); 
map.set("ğŸ®",0);
map.set("ğŸ”",1);
map.set("ğŸ‹",2);
const it = map[Symbol.iterator](); 
it.next(); // {value: Array(2), done: false} value:  ["ğŸ®", 0]
it.next(); // {value: Array(2), done: false} value:  ["ğŸ”", 1]
it.next(); // {value: Array(2), done: false} value:  ["ğŸ‹", 2]
it.next(); // {value: undefined, done: true}

```

* å¯è¿­ä»£ç±»å‹:  `Array `ã€  `String `ã€ `Map` ã€` Set`ã€`NodeListï¼ˆdocument.getElementsByName("xxx")çš„è¿”å›å€¼ï¼‰`ã€`arguments`ã€`generator`

> NodeList å¯¹è±¡æ˜¯ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæœ¬æ¥å°±å…·æœ‰éå†æ¥å£ï¼Œå¯ä»¥ç›´æ¥éå†
>
> å¯¹äºç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆå­˜åœ¨æ•°å€¼é”®åå’Œ`length`å±æ€§ï¼‰ï¼Œéƒ¨ç½² Iterator æ¥å£ï¼Œæœ‰ä¸€ä¸ªç®€ä¾¿æ–¹æ³•ï¼Œå°±æ˜¯`Symbol.iterator`æ–¹æ³•ç›´æ¥å¼•ç”¨æ•°ç»„çš„ Iterator æ¥å£ã€‚

```js
NodeList.prototype[Symbol.iterator] = Array.prototype[Symbol.iterator];
// æˆ–è€…
NodeList.prototype[Symbol.iterator] = [][Symbol.iterator];

[...document.querySelectorAll('div')] // å¯ä»¥æ‰§è¡Œäº†
```

