# css-grid 响应式布局

> 建议全屏演示

<vue3-sfc>
<vue3-file name="App.vue">
<template>
  <wrap v-model:width="width" v-model:height="height" :maxWidth="1700" :maxHeight="1080">
    <div class="card-grid">
      <div class="cards-container">
        <div class="card" v-for="(card, index) in cards" :key="index">
          <div class="card-image">
            <img :src="`https://picsum.photos/seed/${index}/300/200`" :alt="`卡片 ${card.id} 图片`">
          </div>
          <div class="card-content">
            <h3>卡片 {{ card.id }}</h3>
            <p>{{ card.description }}</p>
          </div>
        </div>
      </div>
    </div>
  </wrap>
</template>

<script setup>
import { ref } from 'vue';
import wrap from './wrap.vue'

const width = ref(1600)
const height = ref(630)

const cards = ref([
  { id: 1, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 2, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 3, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 4, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 5, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 6, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 7, description: 'wrap右下角黑点按住拖动可改变宽高' },
  { id: 8, description: 'wrap右下角黑点按住拖动可改变宽高' },
]);
</script>

<style scoped>
.card-grid {
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
}

.cards-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px; 
}

.card {
  background-color: #ffffff;
  border-radius: 8px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  transition: transform 0.2s ease;
}

.card:hover {
  transform: translateY(-5px);
}

.card-image img {
  width: 100%;
  height: 140px;
  object-fit: cover;
}

.card-content {
  padding: 16px;
}

.card-content h3 {
  margin: 0 0 8px 0;
  font-size: 18px;
  color: #333;
}

.card-content p {
  margin: 0;
  font-size: 14px;
  color: #666;
  line-height: 1.5;
}

@media (max-width: 600px) {
  .card-grid {
    padding: 10px;
  }
  
  .cards-container {
    gap: 15px;
  }
}
</style>

</vue3-file>

<vue3-file name="wrap.vue">
<template>
  <div class="resizable-container">
    <div
      class="resizable-box"
      :style="{ 
        width: `${width}px`, 
        height: `${height}px`,
        left: `${x}px`,
        top: `${y}px`
      }"
    >
      <div class="box-content">
        <slot :width="width" :height="height"></slot>
      </div>

      <!-- 右下角拖拽手柄 -->
      <div
        class="resize-handle"
        @mousedown="startResize"
        @touchstart="startResizeTouch"
      ></div>
    </div>

  </div>
</template>

<script setup>
  import { ref, onMounted, onUnmounted } from "vue";

  const props = defineProps({
    width: { type: Number, default: 800 },
    height: { type: Number, default: 800 },
    minWidth: { type: Number, default: 100 },
    minHeight: { type: Number, default: 100 },
    maxWidth: { type: Number, default: 800 },
    maxHeight: { type: Number, default: 800 },
  })

  const emit = defineEmits(['update:width', 'update:height'])

  const x = ref(50);
  const y = ref(50);

  const isResizing = ref(false);
  const startX = ref(0);
  const startY = ref(0);
  const startWidth = ref(0);
  const startHeight = ref(0);

  const startResize = (e) => {
    e.preventDefault();
    isResizing.value = true;
    startX.value = e.clientX;
    startY.value = e.clientY;
    startWidth.value = props.width;
    startHeight.value = props.height;

    document.addEventListener("mousemove", handleResize);
    document.addEventListener("mouseup", stopResize);
  };

  const startResizeTouch = (e) => {
    isResizing.value = true;
    startX.value = e.touches[0].clientX;
    startY.value = e.touches[0].clientY;
    startWidth.value = props.width;
    startHeight.value = props.height;

    document.addEventListener("touchmove", handleResizeTouch, {
      passive: false,
    });
    document.addEventListener("touchend", stopResize);
  };

  const handleResize = (e) => {
    if (!isResizing.value) return;

    const newWidth = Math.min(
      props.maxWidth,
      Math.max(props.minWidth, startWidth.value + (e.clientX - startX.value))
    );

    const newHeight = Math.min(
      props.maxHeight,
      Math.max(props.minHeight, startHeight.value + (e.clientY - startY.value))
    );
    emit('update:width', newWidth)
    emit('update:height', newHeight)
  };

  const handleResizeTouch = (e) => {
    if (!isResizing.value) return;
    e.preventDefault();

    const newWidth = Math.min(
      props.maxWidth,
      Math.max(
        props.minWidth,
        startWidth.value + (e.touches[0].clientX - startX.value)
      )
    );

    const newHeight = Math.min(
      props.maxHeight,
      Math.max(
        props.minHeight,
        startHeight.value + (e.touches[0].clientY - startY.value)
      )
    );
    emit('update:width', newWidth)
    emit('update:height', newHeight)
  };

  const stopResize = () => {
    isResizing.value = false;

    document.removeEventListener("mousemove", handleResize);
    document.removeEventListener("mouseup", stopResize);
    document.removeEventListener("touchmove", handleResizeTouch);
    document.removeEventListener("touchend", stopResize);
  };

  onUnmounted(() => {
    document.removeEventListener("mousemove", handleResize);
    document.removeEventListener("mouseup", stopResize);
    document.removeEventListener("touchmove", handleResizeTouch);
    document.removeEventListener("touchend", stopResize);
  });
</script>

<style scoped>
  .resizable-container {
    position: relative;
    width: 100%;
    height: 500px;
    padding: 20px;
    background-color: #f5f5f5;
    border: 1px solid #e0e0e0;
  }

  .resizable-box {
    position: absolute;
    background-color: #ffffff;
    border: 2px solid #42b983;
    border-radius: 6px;
    padding: 16px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    transition: border-color 0.2s;
    overflow: hidden;
  }

  .resizable-box:hover {
    border-color: #359e75;
  }

  .box-content {
    width: 100%;
    height: 100%;
    color: #333;
  }

  .box-info {
    margin-top: 10px;
    font-size: 12px;
    color: #666;
  }

  .resize-handle {
    position: absolute;
    right: 0;
    bottom: 0;
    width: 5px;
    height: 5px;
    cursor: nwse-resize;
    background-color: rgba(0, 0, 0, 1);
  }

  :deep(.resizable-box:active) {
    border-color: #2d8e6c;
  }
</style>
</vue3-file>
</vue3-sfc>

// 👇👇👇 CSS Grid 布局响应式卡片

<iframe width="100%" height="500px" frameborder="1" scrolling="auto" src="https://code.juejin.cn/pen/7551254817885454378"></iframe>

// 👇👇👇 div 拖拽 demo

<iframe width="100%" height="500px" frameborder="1" scrolling="auto" src="https://code.juejin.cn/pen/7551249989919080511"></iframe>
