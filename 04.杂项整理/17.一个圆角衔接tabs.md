# 一个圆角衔接 tabs

// 其中关键就是将 tabs-header 的背景色分为上下两份 `{ background: 'linear-gradient(to bottom, #0F86F3 0%, #0F86F3 50%, #ffffff 50%, #ffffff 100%)' }`

<vue3-sfc>
<vue3-file name="App.vue">
<template>
  <div class="bg-[pink] p-[20px]">
    <tabs
      :custom-style="{ borderRadius: '16px 16px 0px 0px', background: 'linear-gradient(to bottom, #0F86F3 0%, #0F86F3 50%, #ffffff 50%, #ffffff 100%)' }" 
      :active-tab-style="{
        borderRadius: tabData.current === 0 ? '16px 16px 16px 0' : (tabData.current === tabData.list.length - 1) ? '16px 16px 0 16px' : '16px',
        backgroundColor: '#fff',
      }"
      :default-tab-style="defaultTabStyle" :list="tabData.list" :current="tabData.current" @change="onTabClick"
    ></tabs>
  </div>
</template>

<script setup>
import tabs from './tabs.vue'
import { reactive } from 'vue'
const tabData = reactive({
  list: [
    { label: '全部' },
    { label: '待付款' },
    { label: '待发货' },
    { label: '待收货' },
    { label: '待评价' },
    { label: '已完成' },
  ],
  current: 0,
})

const onTabClick = (item, index) => {
  tabData.current = index
}

const defaultTabStyle = (index) => {
  let radiusT = '16px'
  let radiusR = '16px'
  let radiusB = '0'
  let radiusL = '0'
  if (index === tabData.current - 1) {
    radiusB = '16px'
  }
  if (index === tabData.current + 1) {
    radiusL = '16px'
  }
  if (index === 0) {
    radiusL = '0'
  }
  if (index === tabData.list.length - 1) {
    radiusB = '0'
  }
  return {
    borderRadius: `${radiusT} ${radiusR} ${radiusB} ${radiusL}`,
    backgroundColor: '#0F86F3',
  }
}
</script>

</vue3-file>

<vue3-file name="tabs.vue">
<template>
  <div :style="customStyle" class="relative z-1 flex items-center justify-center h-[120px]">
    <div
      v-for="(item, index) in list" :key="index"
      class="[font-weight:400] flex shrink-0 flex-nowrap items-center justify-center gap-[5px] pb-[48px] pt-[30px] text-center text-[30px] text-[#5E6E7B] leading-[42px] font-[PingFangSC,_PingFang_SC] not-italic"
      :style="[
        computedDefaultTabStyle(index),
        current === index ? {
          fontWeight: 500,
          fontSize: '32px',
          color: '#19245A',
          lineHeight: '42px',
          ...activeTabStyle,
        } : {
          fontWeight: 400,
          fontSize: '30px',
          color: '#5E6E7B',
          lineHeight: '42px',
        },
        { width: `${100 / list.length}%` }
      ]" @click="onTabClick(item, index)"
    >
      <span class="whitespace-nowrap">
        {{ item.label }}
      </span>
      <div v-if="item.iconRight" :name="item.iconRight" :size="'24px' + ''" ></div>
    </div>
    <div
      :style="[{ left: `${(100 / list.length * (current + 1)) - (100 / list.length / 2)}%` }, bottomLineStyle]"
      class="[transition:left] absolute bottom-[32px] h-[6px] w-[40px] translate-x-[-50%] rounded-full bg-[#1874E6] duration-300"
    ></div>
  </div>
</template>

<script setup>
import { computed } from 'vue'
const isFunction = (value) => Object.prototype.toString.call(value) === '[object Function]'
const props = defineProps({
  list: {
    type: Array,
    default: () => [],
  },
  current: {
    type: Number,
    default: 0,
  },
  customStyle: {
    type: Object,
    default: () => ({}),
  },
  activeTabStyle: {
    type: Object,
    default: () => ({}),
  },
  defaultTabStyle: {
   type: [Object,Function],
    default: () => ({}),
  },
  bottomLineStyle: {
    type: Object,
    default: () => ({}),
  },
})

const emit = defineEmits(['change'])
const onTabClick = (item, index) => {
  console.log('onTabClick', props, item, index)
  emit('change', item, index)
}

const computedDefaultTabStyle = (index) => {
  if (isFunction(props.defaultTabStyle)) {
    return props.defaultTabStyle(index)
  }
  return props.defaultTabStyle
}

</script>

</vue3-file>
</vue3-sfc>
